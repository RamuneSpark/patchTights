function o(e,t){var a,o=document.createElement("div");return o.id=e,o.typeName=t,document.body.appendChild(o),"img"===t&&(a=document.createElement("img"),o.appendChild(a),a.id=e+"-@-IMG",a.style.display="none"),"txt"===t&&((a=document.createElement("span")).classList.add("mainTxt"),a.id=e+"-@-SPAN",a.txt="",a.style.display="inline-block",a.style.whiteSpace="nowrap",o.appendChild(a)),o}function D(e){e=e.id;return document.getElementById(e+"-@-IMG")}function P(e){e=e.id;return document.getElementById(e+"-@-SPAN")}function u(e,t){""===t?g(e):("block"!==(e=D(e)).style.display&&(e.style.display="block"),!1===e.src.endsWith(t)&&(e.src=t))}function f(e,t){""===t?g(e):(e=P(e))&&e.txt!==t&&(e.innerHTML=t,e.txt=t)}function g(e){var t=D(e),e=P(e);null!==t&&(t.style.display="none",t.src=""),null!==e&&(e.innerHTML="",e.txt="")}function y(e,t,a){"no"!==t&&(isNaN(t)?e.style.left=t:e.style.left=t+"px"),"no"!==a&&(isNaN(a)?e.style.top=a:e.style.top=a+"px")}function t(e,t){y(e,t.x,t.y)}let h="-50%",q="0%",U=q,H="-100%",$=H;function b(e,t,a,o=0,i=1,l=1,s=1,n=-1){let r="translate("+t+", "+a+")";0!==o&&(r+="rotate("+o+"deg)"),1!==i&&(r+="scale("+i+")"),1===l&&1===s||(r+="scaleX("+l+") scaleY("+s+")"),-1!==n&&(r+=" "+n),e.style.transform=r}function K(e){let t=e;return t=(t=(t=(t=t.replace(/\[/g,"<ruby>")).replace(/\]/g,"</ruby>")).replace(/\(/g,"<rt>")).replace(/\)/g,"</rt>")}function J(e){return null!=e}function m(e,t=-1,a=-1,o=-1,i=-1,l=-1){"green"===t?t="#BFFFB0":"blue"===t?t="#AFD0FF":"red"===t&&(t="#FFC6BB"),-1!==t&&e.style.color!==t&&(e.style.color=t),-1!==a&&e.style.fontFamily!==a&&(e.style.fontFamily=a),-1!==o&&e.style.fontSize!==o&&(isNaN(o)?e.style.fontSize=o:e.style.fontSize=o+"px"),-1!==i&&e.style.fontWeight!==i&&(e.style.fontWeight=i),-1!==l&&e.style.textAlign!==l&&(e.style.textAlign=l)}function W(e,o,i){if(0!==o){"green"==i?i="#17890B":"blue"==i?i="#012DD4":"red"==i&&(i="#CE2807");let a="";for(let t=0;t<20;t++)for(let e=1;e<=2;e++){var l=2*Math.PI*(t/16),s=Math.cos(l)*(e/2)*o,l=Math.sin(l)*(e/2)*o;1===e&&0===t||(a+=","),a+=s+"px "+l+"px 0px "+i}e.style.textShadow!==a&&(e.style.textShadow=a)}else 0===o&&""!==e.style.textShadow&&(e.style.textShadow="")}let V=[];function i(e,t){t.appendChild(e),"img"!==e.typeName&&"txt"!==e.typeName||(e.del=()=>{g(e)}),V.push(e),e.style.position="absolute"}let X;function Y(){let e;return X=navigator.userAgent.match(/iPhone|iPad|Android.+Mobile|Android/)?(e=!0,navigator.userAgent.match(/iPhone|iPad/)?"iOS":"others"):(e=!1,"others"),e}function _([e,t],[a,o]){var i={},a=a-e,e=o-t,o=a*a+e*e;return 0==(o=Math.sqrt(o))?(i.x=0,i.xLength=0,i.y=1,i.yLength=0,i.z=1):(i.x=a/o,i.xLength=a,i.y=e/o,i.yLength=e,i.z=o),i}function j([e,t],[a,o]){a-=e,e=o-t;let i;return Math.abs(e)>Math.abs(a)?i=0<=e?"down":"up":Math.abs(e)<Math.abs(a)?i=0<a?"right":"left":((i=["diagonal"])[1]=0<=e?"down":"up",i[2]=0<a?"right":"left"),i}function Q(e,t){var a=[];let o=!1,i=!1,l=!1;return a[1]=e.getBoundingClientRect(),a[2]=t.getBoundingClientRect(),a[1].top<a[2].top&&(a[2]=e.getBoundingClientRect(),a[1]=t.getBoundingClientRect()),a[2].bottom>a[1].top&&(o=!0),a[1]=e.getBoundingClientRect(),a[2]=t.getBoundingClientRect(),a[2].left<a[1].left&&(a[2]=e.getBoundingClientRect(),a[1]=t.getBoundingClientRect()),a[1].right>a[2].left&&(i=!0),l=!(!i||!o)}function Z(e,t){var a=[],o=Q(e,t);let i=!1;a[1]=e.getBoundingClientRect(),a[2]=t.getBoundingClientRect();e=[,{},{}];return o&&(e[1].y=(a[1].top+a[1].bottom)/2,e[2].y=(a[2].top+a[2].bottom)/2,e[1].x=(a[1].left+a[1].right)/2,e[2].x=(a[2].left+a[2].right)/2,i=j([e[2].x,e[2].y],[e[1].x,e[1].y])),i}function ee(e,t){return(e%t+t)%t}function te(e,t,a,o=()=>{}){return(a<=e&&0<t||e<=a&&t<0)&&(e=a,o()),e}Y();let ae=["OFF","ON"],oe={},ie={},le=!1;function se(){for(var e in ie)ie[e].remove();ie={}}function p(e){var t=new Image;let a=e+"?"+Math.floor(1e5*Math.random());I.datacut&&(a="low/"+e),t.src=a,ie[e]=t}function w(e){return J(ie[e])?ie[e].src:""}function ne(e){return J(oe[e])?oe[e].src:""}function re(e){var t=new Image;t.src=e,oe[e]=t}function me(e,t,a){return e=pe(e,t,a,()=>{e.p=0})}function pe(e,t,a,o=()=>{}){return e.k++,t<=e.k&&(e.k=0,e.p++),a<=e.p&&o(),e}function ce(){return e={p:0,k:0}}function de(e){let t=e;return t=3===t?1:t}re("image/alertButton0.webp"),re("image/alertButton1.webp");let ue=50,fe="",ge=0;function ye(){200560490130<=++ge&&(ge=0),Ge(),U2(),Be(),Pt(),Q2();for(let e=0;e<x.length;e++)J(x[e])&&(x[e].ondown=!1,x[e].onup=!1);F=-1}let he=720,be=1280,we=1,r=o("screen","other");r.style.opacity=1;let xe,c=void 0,d=101,Fe=0,ve=.1,ke=ue/2,Ie=0,Se=ke,Me=ve,Te=ve,ze=ke,Ne=!0;function Be(){99===(d=void 0!==c&&0===d?99:d)?(Ie-=Me)<=0&&(Ie=0,d=100):100===d?(d=101,se()):101===Math.abs(d)?(Se++,-101===d&&(Ne=Ne&&!1),2*Se>=ze&&(Se=0,101===d?(xe=c,Fe=0,J2(),sBI=[],d=-101,Ne=!0):d=-100)):-100==d?d=-99:-99==d&&1<=(Ie+=Te)&&(Ie=1,d=0,c=void 0,Me=ve,Te=ve,ze=ke),r.style.opacity=Ie}document.onkeydown=function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)){function a(e){return v[e].use&&v[e].brightness<=1}if("F12"===t.code)t.preventDefault();else if("KeyA"===t.code||"ArrowLeft"===t.code)"game"===xe?a(0)&&(t.preventDefault(),F=0):"edit1"===xe&&(1===m2?(p2=ee(--p2,3),G("start",5,"se/select")):2===m2?(Je=ee(--Je,4),G("start",5,"se/select")):3===m2&&(c2=ee(--c2,3),G("start",5,"se/select")));else if("KeyD"===t.code||"ArrowRight"===t.code)"game"===xe?a(1)&&(t.preventDefault(),F=1):"edit1"===xe&&(1===m2?(p2=ee(++p2,3),G("start",5,"se/select")):2===m2?(Je=ee(++Je,4),G("start",5,"se/select")):3===m2&&(c2=ee(++c2,3),G("start",5,"se/select")));else if("KeyR"===t.code&&"game"===xe)a(2)&&(t.preventDefault(),F=2);else if("KeyQ"===t.code&&"game"===xe)a(3)&&(t.preventDefault(),F=3);else if("password"===xe){for(let e=0;e<10;e++)a(e)&&t.code==="Digit"+e&&(F=e);a(10)&&"Backspace"===t.code&&(F=10)}}};let Ee=!0,x=[{hold:!1,ondown:!1,onup:!1}],Ae="mouse";function Re(){let t=0;for(let e=0;e<x.length;e++)J(x[e])&&t++;return t}function Oe(t){let a=-1;var o=t.changedTouches[0].identifier;for(let e=0;e<t.touches.length;e++)if(t.touches[e].identifier===o){a=e;break}if(-1===a)for(let e=0;e<x.length;e++)if(J(x[e])&&x[e].id===o){a=e;break}return a}function Ce(e,t,a=0){J(t)||(t={hold:!1,ondown:!1,onup:!1}),"mouse"===Ae?(t.x=e.clientX,t.y=e.clientY,J(t.id)||(t.id=0)):"touch"===Ae&&(t.x=e.touches[a].pageX,t.y=e.touches[a].pageY,t.id=e.changedTouches[0].identifier);a=r.getBoundingClientRect();return t.x-=a.left,t.y-=a.top,t.x*=1/we,t.y*=1/we,t}Y()&&(Ae="touch"),Ee&&setTimeout(()=>{window.addEventListener("pointermove",e=>{var t=e.movementX,a=e.movementY;.5<=Math.sqrt(Math.pow(t,2)+Math.pow(a,2))&&("mouse"!==Ae&&"mouse"===e.pointerType?Ae="mouse":"mouse"===Ae&&"mouse"!==e.pointerType&&(Ae="touch"))}),window.addEventListener("pointerdown",e=>{"mouse"===e.pointerType&&"touch"===Ae?(Ae="mouse",x=[{hold:!0,ondown:!0,onup:!1}]):"mouse"!==e.pointerType&&"mouse"===Ae&&(Ae="touch",x=[{hold:!0,ondown:!0,onup:!1}])}),window.addEventListener("touchstart",e=>{var t;e.preventDefault(),"touch"===Ae&&(t=Oe(e),x[t]=Ce(e,x[t],t),x[t].hold=!0,x[t].ondown=!0)},{passive:!1}),window.addEventListener("touchmove",e=>{var t;e.preventDefault(),"touch"===Ae&&(t=Oe(e),x[t]=Ce(e,x[t],t))}),window.addEventListener("touchend",e=>{e.preventDefault(),"touch"===Ae&&(e=Oe(e),x[e].hold=!1,x[e].onup=!0)}),window.addEventListener("mousedown",e=>{e.preventDefault(),"mouse"===Ae&&(x[0]=Ce(e,x[0]),x[0].hold=!0,x[0].ondown=!0)}),window.addEventListener("mousemove",e=>{e.preventDefault(),"mouse"===Ae&&(x[0]=Ce(e,x[0]))}),window.addEventListener("mouseup",e=>{e.preventDefault(),"mouse"===Ae&&(x[0].hold=!1,x[0].onup=!0)})},400);let Le=47,F=-1,v=[],k=[];for(let e=0;e<Le;e++)k[e]=o("button"+e,"img"),i(k[e],r),y(k[e],100,100*e),b(k[e],h,h),k[e].style.zIndex=1e3,k[e].style.mixBlendMode="normal",v[e]={},v[e].use=!0,v[e].useSNS=!0,v[e].brightness=1,v[e].select=!1,v[e].th=0,v[e].sns=-1,u(k[e],""),k[e].del=()=>{g(k[e]),45===e||46===e?v[e].use=!1:v[e].use=!0,v[e].useSNS=!0,v[e].brightness=1,v[e].select=!1,v[e].th=0,v[e].sns=-1,k[e].style.opacity=1,k[e].style.background=1,b(k[e],h,h),J(D(k[e]))&&(D(k[e]).style.opacity=1)};function Ge(){if(Ee){var t=r.getBoundingClientRect();for(let e=0;e<Le;e++){var a=k[e].getBoundingClientRect(),o=(a.left-t.left)*(1/we),i=(a.top-t.top)*(1/we),l=(a.right-t.left)*(1/we),a=(a.bottom-t.top)*(1/we);x[0].x>o&&x[0].x<l&&x[0].y>i&&x[0].y<a&&0===d&&1===v[e].brightness&&v[e].use&&v[e].useSNS&&(0===M.m||45===e||46===e)?(x[0].ondown&&(v[e].brightness=5,F=e),"mouse"!==Ae||v[e].select||(v[e].select=!0,v[e].th=Math.PI/2)):v[e].select=!1}}for(let t=0;t<Le;t++){1<v[t].brightness&&(v[t].brightness-=.5,v[t].brightness<=1)&&(v[t].brightness=1);let e=1;v[t].select&&v[t].brightness<=1?(v[t].th+=2*Math.PI/ue*3,v[t].th%=2*Math.PI,e=1.3+.1*Math.sin(v[t].th),1!==v[t].sns&&6!==v[t].sns?k[t].style.filter=`brightness(${e}) saturate(1.5)`:k[t].style.filter="none"):(e=v[t].brightness,1!==v[t].sns&&6!==v[t].sns?k[t].style.filter=`brightness(${e})`:k[t].style.filter="none")}}let I=null;function De(t,a,o=1){try{let e;return e=1===o?JSON.stringify(t):t,CryptoJS.AES.encrypt(e,a).toString()}catch{return console.log("異常が検出されました。変換を中止します。"),null}}function Pe(t,a,o=1){try{if(null===t||"null"===t)return null;{var i=CryptoJS.AES.decrypt(t,a).toString(CryptoJS.enc.Utf8);let e;return e=1===o?JSON.parse(i):i}}catch{return console.log("データが存在しないか、異常データが検出されました。"),null}}function qe(){if(!J(I=Pe(I=localStorage.getItem("P.TIGHTS_SAVEDATA"),"KVS6TY"))){(I={clear:[]}).clear[0]=2;for(let e=1;e<=50;e++)I.clear[e]=0;I.last={m:0,clock:0,flip:0,stage:0,look:0},I.edit=[],I.editCheat=!1,I.datacut=1,I.shareAllow=0;for(let e=I.sound=0;e<12;e++)I.edit[e]={m:0,edit:0,editSetting:0,lock:0,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,2,2,2,2,2,2,2]]};I.edit=De(I.edit,"fSN4sq")}}function Ue(){var e=De(I,"KVS6TY");J(e)&&localStorage.setItem("P.TIGHTS_SAVEDATA",e)}function He(){I.clear=[2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function $e(){let t=Pe(I.edit,"fSN4sq");if(null===t){t=[];for(let e=0;e<12;e++)t[e]={m:0,editSetting:0,edit:0,lock:0,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,2],[2,2,2,2,2,2,2,2]]}}return t}function Ke(e=-1,t=null){var a=$e();-1!==e&&(a[e]=JSON.parse(JSON.stringify(t))),I.edit=De(a,"fSN4sq")}qe();let Je=0,We=!1,Ve=[[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[1,1]],[[-1,-1],[0,-1],[1,-1],[1,0],[-1,1],[0,1],[1,1]],[[-1,-1],[0,1],[1,-1],[-1,0],[1,0],[-1,1],[1,1]],[[-1,-1],[0,-1],[1,-1],[-1,0],[-1,1],[0,1],[1,1]]],Xe=[[[-1,2],[1,2],[-1,3],[1,3],[-1,4],[1,4],[-1,5],[1,5],[-1,6],[1,6]],[[-2,-1],[-2,1],[-3,-1],[-3,1],[-4,-1],[-4,1],[-5,-1],[-5,1],[-6,-1],[-6,1]],[[-1,-2],[1,-2],[-1,-3],[1,-3],[-1,-4],[1,-4],[-1,-5],[1,-5],[-1,-6],[1,-6]],[[2,-1],[2,1],[3,-1],[3,1],[4,-1],[4,1],[5,-1],[5,1],[6,-1],[6,1]]],Ye=!1;function _e(){if(0===S.m&&-1!==B.x&&-1!==B.y){let l=B.x,s=B.y;Ye=!1;for(let t=0;t<n;t++)for(let e=0;e<n;e++)z[t][e].sel=0;function e(t){for(let e=0;e<t.length;e++){var a=l+t[e][0],o=s+t[e][1],i=0<a&&a<n-1&&0<o&&o<n-1&&6===Qe;(1<a&&a<n-2&&1<o&&o<n-2&&4===Qe||i)&&J(z[a][o])&&(z[a][o].sel=1,z[a][o].dummy=0,We||1!==z[a][o].gimmick||(We=!0),Ye||2===z[a][o].flip||(Ye=!0))}}We=!1,2!==z[l][s].gimmick&&0!==B.m&&(e(Ve[Je]),We)&&e(Xe[Je])}}let S={m:0,scaleX:1},l={m:0,th:0,v:0},je=0,Qe=4,Ze=100,n=8,et=[];function tt(e=et[je],t=590){var a=e.stage;Qe=e.size;for(let t=0;t<n;t++)for(let e=0;e<n;e++)z[t][e].flip=a[e][t]%10,z[t][e].gimmick=Math.floor(a[e][t]/10);Ze=100,4===Qe&&(Ze=130);const o=360,i=t;for(let t=0;t<n;t++)for(let e=0;e<n;e++)z[t][e].x=o-((n-1)/2-t)*Ze,z[t][e].y=i-((n-1)/2-e)*Ze,y(l0[t][e],z[t][e].x,z[t][e].y)}function at(){if(("none"!==O||0!==je)&&0===S.m){let a=!0,o=-1;for(let t=0;t<n;t++){for(let e=0;e<n;e++)if(2!==z[t][e].flip)if(-1===o)o=z[t][e].flip;else if(o!==z[t][e].flip){a=!1;break}if(!a)break}a&&(N.m=1)}}function ot(){let a=!1,o=!1;for(let t=0;t<n;t++)for(let e=0;e<n&&(R.stage[t][e]%10==0?a=!0:R.stage[t][e]%10==1&&(o=!0),!a||!o);e++);return a&&o}et=[{lock:!1,size:6,q:50,stage:[[2,2,2,2,2,2,2,2],[2,0,1,0,0,1,1,2],[2,10,10,10,10,10,10,2],[2,0,0,0,0,0,1,2],[2,0,1,1,1,0,1,2],[2,0,1,0,1,0,1,2],[2,0,1,0,1,0,1,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:4,q:1,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,1,1,1,0,2,2],[2,2,1,0,1,0,2,2],[2,2,1,0,1,0,2,2],[2,2,0,0,0,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:4,q:2,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,1,1,0,0,2,2],[2,2,0,1,1,1,2,2],[2,2,0,1,1,0,2,2],[2,2,0,0,1,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:4,q:2,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,1,1,1,0,2,2],[2,2,1,1,1,1,2,2],[2,2,1,1,1,1,2,2],[2,2,0,1,1,1,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:4,q:2,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,1,0,0,1,2,2],[2,2,1,1,1,1,2,2],[2,2,1,1,1,1,2,2],[2,2,0,0,0,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:4,q:2,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,0,1,1,2,2],[2,2,0,0,0,1,2,2],[2,2,0,0,0,1,2,2],[2,2,0,0,0,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:4,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,1,1,1,1,2,2],[2,2,1,1,1,1,2,2],[2,2,1,1,1,1,2,2],[2,2,0,1,1,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:4,q:2,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,1,1,1,2,2],[2,2,1,1,0,1,2,2],[2,2,1,0,1,1,2,2],[2,2,1,1,1,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:4,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,1,1,0,1,2,2],[2,2,0,2,2,0,2,2],[2,2,0,2,2,0,2,2],[2,2,1,0,1,1,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:6,q:3,stage:[[2,2,2,2,2,2,2,2],[2,1,1,1,0,0,0,2],[2,1,1,0,1,0,0,2],[2,1,1,1,1,0,0,2],[2,0,1,0,0,1,1,2],[2,0,0,0,1,0,1,2],[2,0,0,0,1,0,1,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:4,q:5,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,0,1,1,1,2,2],[2,2,0,1,0,0,2,2],[2,2,0,1,1,1,2,2],[2,2,0,0,0,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:3,stage:[[2,2,2,2,2,2,2,2],[2,1,1,1,1,1,1,2],[2,2,2,0,1,2,2,2],[2,2,2,1,1,2,2,2],[2,2,2,1,1,2,2,2],[2,2,2,1,0,2,2,2],[2,1,1,1,1,1,1,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:4,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,0,1,0,0,2,2],[2,2,0,0,0,1,2,2],[2,2,1,0,0,0,2,2],[2,2,0,0,1,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:4,q:2,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,21,20,2,2,2],[2,2,21,0,1,21,2,2],[2,2,21,1,0,21,2,2],[2,2,2,20,21,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,0,0,0,0,2,2],[2,0,1,0,0,0,0,2],[2,0,1,10,0,0,0,2],[2,0,1,0,10,1,0,2],[2,0,0,0,0,1,0,2],[2,2,0,0,0,0,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,0,0,1,0,1,2],[2,2,2,2,1,20,1,2],[2,0,0,2,1,1,1,2],[2,1,1,1,2,0,0,2],[2,1,20,1,2,2,2,2],[2,1,0,1,0,0,2,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:6,q:3,stage:[[2,2,2,2,2,2,2,2],[2,0,0,1,0,1,0,2],[2,1,1,11,1,10,0,2],[2,1,0,1,0,0,0,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,21,20,21,20,20,20,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,0,1,0,0,1,1,2],[2,10,10,10,10,10,10,2],[2,0,0,0,0,0,1,2],[2,0,1,1,1,0,1,2],[2,0,1,0,1,0,1,2],[2,0,1,0,1,0,1,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:6,stage:[[2,2,2,2,2,2,2,2],[2,2,0,1,0,1,2,2],[2,2,1,0,1,0,2,2],[2,2,0,1,0,1,2,2],[2,2,1,0,1,0,2,2],[2,2,0,1,0,1,2,2],[2,2,1,0,1,0,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,11,11,11,2],[2,2,2,2,11,11,11,2],[2,2,2,2,11,11,11,2],[2,11,11,11,10,11,10,2],[2,11,11,11,10,11,10,2],[2,11,11,11,10,10,10,2],[2,2,2,2,2,2,2,2]]},{lock:!0,size:6,q:8,stage:[[2,2,2,2,2,2,2,2],[2,1,1,1,1,1,1,2],[2,1,1,1,1,1,1,2],[2,1,1,0,0,1,1,2],[2,1,1,0,0,1,1,2],[2,1,1,0,0,1,1,2],[2,1,1,0,0,1,1,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,0,10,0,1,1,1,2],[2,0,20,20,21,21,11,2],[2,0,20,0,1,21,1,2],[2,1,21,1,0,20,0,2],[2,11,21,21,20,20,0,2],[2,1,1,1,0,10,0,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:4,stage:[[2,2,2,2,2,2,2,2],[2,10,0,0,10,10,10,2],[2,10,20,21,21,20,0,2],[2,10,21,20,20,21,0,2],[2,0,21,20,20,21,10,2],[2,0,20,21,21,20,10,2],[2,10,10,10,0,0,10,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:6,stage:[[2,2,2,2,2,2,2,2],[2,2,0,1,1,1,1,2],[2,0,2,0,1,1,1,2],[2,1,0,2,0,1,1,2],[2,1,1,0,2,0,1,2],[2,1,1,1,0,2,0,2],[2,1,1,1,1,0,2,2],[2,2,2,2,2,2,2,2]]},{lock:!1,size:6,q:7,stage:[[2,2,2,2,2,2,2,2],[2,1,0,1,1,0,1,2],[2,1,10,1,0,11,1,2],[2,0,1,21,1,0,1,2],[2,1,0,1,21,0,1,2],[2,0,10,0,1,11,1,2],[2,0,0,0,1,0,1,2],[2,2,2,2,2,2,2,2]]}];let s=[],it=[],lt=[];for(let e=0;e<24;e++)s[e]={time:10,m:0,x:0,y:0,xv:0,yv:0,hue:0,rotate:0},it[e]=o("clearEffect"+e,"img"),i(it[e],r),y(it[e],100,100*e),b(it[e],h,h),it[e].style.zIndex=9995,it[e].style.mixBlendMode="normal",u(it[e],"");function st(){if(Ne){s[0].time=10*Math.random()+5;for(let e=0;e<24;e++)s[e].m=0,lt[e]=ce();p("image/clearEffect0.webp"),p("image/clearEffect1.webp")}if(1===N.m){if(s[0].time--,s[0].time<=0){s[0].time=10*Math.random()+5;for(let e=0;e<24;e++)if(0===s[e].m){var t;s[e].m=1,s[e].x=Math.random()*he,s[e].y=-90,s[e].vx=4*Math.random()-2,s[e].vy=10*Math.random()+3,s[e].rotate=360*Math.random(),E<=et[je].q?s[e].hue=360*Math.random():(t=[50,220],s[e].hue=t[Math.floor(Math.random()*t.length)]);break}}for(let e=0;e<24;e++){var a,o,i;1===s[e].m?(me(lt[e],5,2),s[e].x+=s[e].vx,s[e].y+=s[e].vy,y(it[e],s[e].x,s[e].y),b(it[e],h,h,s[e].rotate),it[e].style.filter=`hue-rotate(${s[e].hue}deg)`,u(it[e],w("image/clearEffect"+lt[e].p+".webp")),a=s[e].y>=be+90,o=s[e].x>=he+90,i=s[e].x<=-90,(a||o||i)&&(s[e].m=0)):g(it[e])}}}let nt=o("NaviTxt","txt"),rt=(i(nt,r),y(nt,"50%","18%"),b(nt,h,h),m(nt,"#FFFFFF","NotoSansJP-Medium","24","normal","center"),nt.style.zIndex=1e4,f(nt,""),0),mt=[];for(let e=0;e<2;e++)mt[e]=document.createElement("img"),mt[e].id="naviImg"+e,mt[e].style.width="48px",mt[e].style.height="auto",mt[e].style.verticalAlign="middle",mt[e].style.position="relative",mt[e].style.top="-3px";function pt(){let t="";if(0===d&&"none"===O)if(1===N.m)1===je&&(t="すべてのパネルが一色に揃えばクリアーになります。");else if(0===N.m)if(1===je)if(0===E&&0===S.m||1===E&&0!==S.m){let e="";if(3===B.x&&3===B.y){e="ここだとキレイに @ が @ に変わりそうです。";for(let e=0;e<2;e++){var a=[1,0];mt[e].src.endsWith(w("image/panel"+a[e]+".webp"))||(mt[e].src=w("image/panel"+a[e]+".webp"))}}else{e="@どこを回転させると良さそうか、少し探ってみましょう。@";for(let e=0;e<2;e++)mt[e].src.endsWith(w("image/panel2.webp"))||(mt[e].src=w("image/panel2.webp"))}t="mouse"===Ae?0===B.m&&0===S.m||rt<=ue/2?"パネルにマウスポインタをあててください。":"クリックすると、光ってるパネルが回転して色が変わります。<br>"+e:0===B.m&&0===S.m||rt<=ue/2?"パネルを長くタップしつづけてください。":"指やペンを離すと、光ってるパネルが回転して色が変わります。<br>"+e}else 0===E&&0!==S.m&&(t="");else if(2===je)E<1||1===E&&0!==S.m?t="めくる範囲は、外にはみ出させることもできます。<br>さっそく試してみましょう。":(t=" @ から、いつでもリスタートできます。<br>もし行き詰ってしまったときは、気軽に使いましょう。",mt[0].src.endsWith(w("image/reset.webp"))||(mt[0].src=w("image/reset.webp")));else if(3===je){t="mouse"===Ae?"ステージによっては、 @ @ をクリックして<br>パネルをめくる範囲を回転させることができます。":"ステージによっては、 @ @ をタップして<br>パネルをめくる範囲を回転させることができます。";for(let e=0;e<2;e++)mt[e].src.endsWith(w("image/turn"+e+".webp"))||(mt[e].src=w("image/turn"+e+".webp"))}else if(4===je)t=E<=0?"ステージセレクト画面の★は、<br>ノルマ以下の手数でクリアしたときにもらえます。":1===E||2===E&&0!==S.m?"ノルマは画面上部に書かれています。<br>このステージでは「2」なので、次の手でクリアすれば★獲得。":"ちなみに、ノルマを超えても<br>ゲームオーバーになることはありません。";else if(5===je){t="パネルを揃えるときは、 @ でも @ でもOKです。";for(let e=0;e<2;e++)mt[e].src.endsWith(w("image/panel"+e+".webp"))||(mt[e].src=w("image/panel"+e+".webp"))}else 13===je?(t=E%2==0?"mouse"===Ae?'マウスポインタが @ に<span style ="color:#FFFF00">直接当たる場所</span>では、<br>ひっくり返せません。':'指やペンが @ に<span style ="color:#FFFF00">直接当たる場所</span>では、<br>ひっくり返せません。':"@ そのものがフリップしないわけではないので、<br>気を付けてください。",mt[0].src.endsWith(w("image/panelGimmickDemo2.webp"))||(mt[0].src=w("image/panelGimmickDemo2.webp"))):14===je?(t='<span style ="color:#FFFF00">ひっくり返す範囲に</span> @ を巻き込むと、<br>ロングタイツに変化します。',mt[0].src.endsWith(w("image/panelGimmickDemo1.webp"))||(mt[0].src=w("image/panelGimmickDemo1.webp"))):17===je&&E<=0&&(t="ヒミツのパスワード：4622<br>エディットモードで何かが変化します。");""!==t?f(nt,t):g(nt);var e,o=P(nt);o.innerHTML.includes("@")&&(2===(e=o.innerHTML.split("@")).length?(f(nt,e[0]),o.append(mt[0]),o.insertAdjacentHTML("beforeend",e[1])):(f(nt,e[0]),o.append(mt[0]),o.insertAdjacentHTML("beforeend",e[1]),o.append(mt[1]),o.insertAdjacentHTML("beforeend",e[2])))}let ct=o("debug","txt"),dt=(i(ct,r),y(ct,0,0),b(ct,q,U),m(ct,"#FFFFFF","NotoSansJP-Medium","30","normal","right"),W(ct,3,"#000000"),ct.style.zIndex=1e4,f(ct,""),"https://ramunespark.github.io/patchTights/"),ut=[0,5,1,2,3,6],ft=o("shareBG","other"),gt=(i(ft,r),y(ft,"50%","50%"),b(ft,h,h),ft.style.zIndex=1e4,ft.style.width=he+"px",ft.style.height=be+"px",ft.style.mixBlendMode="normal",ft.del=()=>{y(ft,"50%","50%")},o("snsTitle","txt")),yt=(i(gt,ft),y(gt,"50%","6%"),b(gt,h,h),m(gt,"#FFFFFF","smartFontUI","40","bold","right"),gt.style.zIndex=1e4,f(gt,""),o("snsClock","txt")),ht=(i(yt,ft),y(yt,"95%","92%"),b(yt,H,h),m(yt,"#c4ff65","smartFontUI","27","normal","right"),yt.style.zIndex=1e4,f(yt,""),o("snsMemory","txt")),bt=(i(ht,ft),y(ht,"5%","92%"),b(ht,q,h),m(ht,"#ffffff","smartFontUI","27","normal","left"),ht.style.zIndex=1e4,f(ht,""),50);for(let t=0;t<ut.length;t++){let e=t+35;ft.appendChild(k[e])}function wt(t=0,a=50){if(Ne){for(let e=0;e<6;e++)p(`sys/shareButton${e}.webp`);p("sys/shareButton0c.webp")}var e=ut.length,o=he/(1.5*e+.5);y(gt,"50%",a-8+"%");for(let e=0;e<ut.length;e++){var i=e+35;v[i].sns=ut[e],k[i].transformOrigin="center left",b(k[i],h,h,0,o/100),y(k[i],(2+3*e)*o*.5,a+"%"),0===e&&1===t?u(k[i],"sys/shareButton0c.webp"):u(k[i],`sys/shareButton${ut[e]}.webp`)}}function xt(e=0){let t=-1;for(let e=0;e<ut.length;e++)F-35===e&&(t=ut[e]);function a(e,t=()=>{}){function a(t){for(let e=0;e<ut.length;e++)v[e+35].useSNS=t}a(!1),setTimeout(()=>{t(),a(!0)},500)}-1!==t&&(H0(),0===t?vt(Ft(e,!0),()=>{M.m=1,M.mode="copy",M.button=[1],M.size=200,M.text="共有テキストをコピーしました。",f(T[45],"OK")},()=>{M.m=1,M.mode="copyError",M.button=[0],M.size=200,M.text="共有テキストのコピーに失敗しました。",f(T[45],"戻る")}):1===t?a(t,()=>{zt(kt(Ft(e,!0)))}):2===t?a(t,()=>{zt(It(Ft(e,!0)))}):3===t?a(t,()=>{zt(St(Ft(e,!0)))}):5===t?a(t,()=>{zt(Mt(Ft(e,!0)))}):6===t&&a(t,()=>{zt(Tt(Ft(e,!1)))})),"copy"===M.mode?45===F&&(G("start",0,"se/confirm"),M.m=4):"copyError"===M.mode&&45===F&&(G("start",0,"se/back"),M.m=4)}function Ft(e=0,t=!0){let a="";if(0===e&&(a+="ぐるっとパネル・パチっとタイツ\n"),a+="『パチタイツ』（Patch Tights）\n",1===e){let e="",t=(I.last.flip<=et[I.last.stage].q&&(e="★"),I.last.flip);1e3<=t?t="1000手以上":t+="手",a+=`［ステージ${I.last.stage}］を［${t}］${e}でクリアしました！
`}return 2!==e&&(a+="\n"+dt),2===e&&(a=(a+="エディットステージを作りました！\n\n▼リンクにアクセスするだけで受け取れます\n")+dt+"?edit="+qt()),t&&(a+="\n\n#パチタイツ #ブラウザゲーム"),a}function vt(e,t=()=>{},a=()=>{}){navigator.clipboard&&window.ClipboardItem?(e=new Blob([e],{type:"text/plain"}),e=new ClipboardItem({"text/plain":e}),navigator.clipboard.write([e]).then(()=>{t(),console.log(!0)},()=>{a(),console.log(!1)})):a()}function kt(e){return"https://bsky.app/intent/compose?text="+encodeURIComponent(e)}function It(e){return"https://x.com/intent/post?text="+encodeURIComponent(e)}function St(e){return"https://misskeyshare.link/share.html?text="+encodeURIComponent(e)}function Mt(e){return"https://taittsuu.com/share?text="+encodeURIComponent(e)}function Tt(e){return"https://line.me/R/share?text="+encodeURIComponent(e)}function zt(e){"iOS"===X?window.location.href=e:window.open(e,"_blank")}function Nt(e=()=>{}){Ne&&p("image/backButton.webp"),43===F&&(e(),G("start",1,"se/back")),b(k[43],q,U),y(k[43],"3%","3%"),u(k[43],w("image/backButton.webp"))}let Bt=[],Et=o("passwordBG","other"),At=(i(Et,r),y(Et,"50%","50%"),b(Et,h,h),Et.style.zIndex=100,Et.style.width=he+"px",Et.style.height=be+"px",Et.style.mixBlendMode="normal",Et.del=()=>{y(Et,"50%","50%")},o("passTitle","txt")),Rt=(i(At,Et),y(At,"50%","6%"),b(At,h,h),m(At,"#FFFFFF","smartFontUI","40","bold","right"),At.style.zIndex=1e4,f(At,""),(()=>{var t=[35,45,55,65];for(let e=0;e<4;e++)Bt[e]=o("password"+e,"txt"),i(Bt[e],Et),y(Bt[e],t[e]+"%","85%"),b(Bt[e],h,h),m(Bt[e],"#FFFFFF","KaqookanV2","60","normal","right"),Bt[e].style.zIndex=0,f(Bt[e],"")})(),!1),Ot=110,Ct=(()=>{var e=[["-","-","-","-"],[2,1,6,4],[7,7,0,4],[7,0,3,2],[0,8,6,8],[9,1,3,2],[0,2,1,8],[5,6,3,4],[1,2,2,8],[6,2,7,5],[9,7,7,9],[4,2,3,7],[4,4,3,6],[3,0,0,9],[8,0,7,2],[3,7,8,8],[2,4,7,3],[6,0,1,5],[2,4,6,0],[3,9,5,0],[0,3,6,5],[7,4,2,5],[3,5,5,1],[2,0,9,4],[5,7,9,5]];return e})();function Lt(){let t=0;for(let e=1;e<=24&&1<=I.clear[e];e++)t=e;return t}function Gt(){let t=!0;for(let e=1;e<=24;e++)if(!(2<=I.clear[e])){t=!1;break}return t}let M={m:0,x:0,y:50,opacity:0,mode:"",text:"",button:[0,1],size:250},a=o("alertWindow","other"),Dt=(i(a,r),y(a,0,0),b(a,h,h),a.style.zIndex=1e11,a.style.opacity=0,a.style.width="680px",a.style.height="480px",a.style.borderRadius="40px",a.style.outline="16px double #FFFFFF",a.style.backgroundColor="#000000",a.style.mixBlendMode="normal",a.del=()=>{M.opacity=0,M.m=0,a.style.display="none",a.style.width="0px",a.style.height="0px"},o("alertText","txt"));function Pt(){Ne&&(a.appendChild(k[45]),a.appendChild(k[46]),b(k[45],h,$),b(k[46],h,$),v[45].use=!1,v[46].use=!1),1===M.m?(M.x=100,M.m=2,f(Dt,M.text),console.log(Dt.offsetHeight),0<Dt.offsetHeight&&(M.size=Dt.offsetHeight+170,a.style.height=M.size+"px"),a.style.width="680px",Dt.style.width="630px",a.style.display="block"):2===M.m||3===M.m?(2===M.m&&(M.x-=5,0<Dt.offsetHeight&&(M.size=Dt.offsetHeight+170,a.style.height=M.size+"px"),M.x<=50)&&(M.x=50,M.m=3,v[45].use=!0,v[46].use=!0),M.opacity+=.1,1<=M.opacity&&(M.opacity=1)):4===M.m&&(v[45].use=!1,v[46].use=!1,M.x-=5,M.opacity-=.1,M.opacity<=0)&&(M.opacity=0,M.m=0,a.style.height="0px",a.style.width="0px",a.style.display="none",g(k[45]),g(k[46])),2===M.button.length?(y(k[45],"28%",M.size-25),y(k[46],"72%",M.size-25)):y(k[45],"50%",M.size-25);var t=[45,46];for(let e=0;e<2;e++)e<M.button.length?u(k[t[e]],ne(`image/alertButton${M.button[e]}.webp`)):(g(k[t[e]]),g(T[t[e]]));y(a,M.x+"%",M.y+"%"),a.style.opacity=M.opacity,f(Dt,M.text)}function qt(){var e=JSON.parse(JSON.stringify(R)),e=De((1e3*e.editSetting+100*e.lock+10*e.size+e.q).toString(36)+" "+Wt(e.stage),"q",0),e=encodeURIComponent(e);return console.log("http://127.0.0.1:8080/?edit="+e),e}i(Dt,a),y(Dt,"25px","25px"),b(Dt,q,q),P(Dt).style.whiteSpace="normal",m(Dt,"#ffffff","smartFontUI","28","normal","left"),Dt.style.zIndex=100,f(Dt,"");let Ut=new URL(window.location.href),Ht=Ut.searchParams,$t=decodeURIComponent(Ht.get("edit")),Kt=null;function Jt(){let t=Pe($t,"q",0),a=null;if(null!==(t=null!==t?t.split(" "):t)){a={m:1};let e=parseInt(t[0],36);if(e=(e=JSON.stringify(e)).padStart(4,"0"),a.edit=Number(e.charAt(0)),a.editSetting=Number(e.charAt(0)),a.lock=Number(e.charAt(1)),a.size=Number(e.charAt(2)),a.q=Number(e.charAt(3)),0!==a.edit&&1!==a.edit)return null;if(0!==a.lock&&1!==a.lock)return null;if(4!==a.size&&6!==a.size)return null;if(!(0<=a.q&&a.q<=9&&Number.isInteger(a.q)))return null;if(null===Kt){if(""!==t[1]?a.stage=t[1]:a.stage=null,null!==a.stage&&(a.stage=Vt(a.stage),Kt=JSON.stringify(a.stage)),null===a.stage)return null}else a.stage=JSON.parse(Kt)}return a}function Wt(a){var o={0:0,1:1,2:2,10:3,11:4,20:5,21:6};let i="";console.log(JSON.stringify(a));for(let t=0;t<n;t++)for(let e=0;e<n;e++)i+=JSON.stringify(o[a[t][e]]);return Xt(Yt(i,"0123456"))}function Vt(e){var a=Yt(e).toString(7),o=[0,1,2,10,11,20,21],i=[];let l=0;if(a.length!==n*n)return null;for(let t=0;t<n;t++){i[t]=[];for(let e=0;e<n;e++){var s=a.charAt(l),s=Number(s);if(!(0<=s&&s<o.length&&Number.isInteger(s)))return null;i[t][e]=o[s],l++}}return i}function Xt(t){var a=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!"#$%&'()-=^~|@[]{};:+*,./<>?_`,o=BigInt(a.length);if(0n===t)return a[0];{let e="";for(;0n<t;){var i=t%o;t/=o,e=a[Number(i)]+e}return e}}function Yt(t,a=`0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!"#$%&'()-=^~|@[]{};:+*,./<>?_`){var o=BigInt(a.length);let i=0n;for(let e=0;e<t.length;e++){var l=t[e],l=a.indexOf(l);if(-1===l)return null;i=i*o+BigInt(l)}return i}let _t=o("stageSelectBG","img"),jt=(i(_t,r),y(_t,0,0),b(_t,q,U),_t.style.zIndex=0,_t.style.mixBlendMode="normal",u(_t,""),o("selectTitle","txt")),T=(i(jt,r),y(jt,"50%","8%"),b(jt,h,U),m(jt,"#FFFFFF","smartFontUI","60","bold","right"),jt.style.zIndex=1e4,f(jt,""),[]);for(let e=0;e<Le;e++)T[e]=o("stageName"+e,"txt"),i(T[e],k[e]),y(T[e],"50%","50%"),b(T[e],h,h),m(T[e],"#FFFFFF","smartFontUI","45","normal","right"),T[e].style.opacity=1,T[e].style.zIndex=10,f(T[e],"");m(T[45],-1,-1,"35"),m(T[46],-1,-1,"35");let Qt=5,Zt=0,e0=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],[21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]],t0={xy:0},a0=!0;function o0(){Ne&&(p("image/stageMark0.webp"),p("image/stageMark1.webp"),p("image/stageMark2.webp"),p("image/stageMarkNone.webp"),p("image/passButton.webp"),Rt=!1,bt=80,Ot=80,a0=!1,1<=I.last.m&&(I.last.look++,a0=!0),2<=I.last.look&&(I.last.look=2,1<=I.last.m)&&(bt=50,a0=!1),Ue());let i=!1;-100===d&&G("start",31,"bgm/menu"),0<d&&j2(31,.1);for(let e=0;e<24;e++)v[e].x=160*(e%4-1.5)+360,v[e].y=100*Math.floor(e/4)+320;for(let e=0;e<24;e++)if(F===e){G("start",0,"se/confirm"),c="game",je=e0[Zt][e];break}let t=-1;for(let e=0;e<28;e++){y(k[e],v[e].x,v[e].y);var a=e0[Zt][e];1<=I.clear[a]||1<=I.clear[a-1]?(v[e].use=!0,u(k[e],w(`image/stageMark${I.clear[a]}.webp`)),f(T[e],a),1<=I.clear[a-1]&&(t=e)):(v[e].use=!1,v[e].y<=v[t].y?u(k[e],w("image/stageMarkNone.webp")):g(k[e]),g(T[e])),D(k[e]).style.opacity=.55}f(jt,"ステージセレクト"),i0();let e="記録をシェア";44!==F||a0||(Rt^=!0,G("start",0,"se/confirm"));if(y(At,"50%","76%"),f(At,"パスワード"),Rt){Ot-=2;var o=[32,44,56,67];for(let t=0;t<4;t++){m(Bt[t],"#FFFFFF");let e=Ct[Lt()][t];Gt()&&(e=[7,3,8,2][t]),y(Bt[t],o[t]+"%","84%"),0===e?f(Bt[t],"O"):f(Bt[t],e)}Ot<=50&&(Ot=50)}else 80<=(Ot+=2)&&(Ot=80);if(y(Et,"50%",Ot+"%"),1<=I.last.m){if(Rt)80<=(bt+=2)&&(bt=80);else{let e=2;a0&&(e=.8),(bt-=e)<=50&&(bt=50,a0=!1)}var l=Date.now(),l=I.last.clock+9e5+999-l;let e=Math.floor(Math.floor(l/1e3)/60),t=Math.floor(l/1e3)%60,a=(e<10&&(e="0"+e),t<10&&(t="0"+t),l<=0&&(d<=-100&&(bt=80),I.last.m=0,Ue()),895e3<=l&&1===I.last.look?(gt.style.opacity=ge%2,i=!0):gt.style.opacity=1,I.last.flip),o=(1e3<=a&&(a="---"),"ステージ"+I.last.stage+"<br>"+a+"手でクリア");I.last.flip<=et[I.last.stage].q&&(o+="★"),f(yt,'シェア可能時間<br>残り <span style = "font-family:FGMediumHankaku">'+e+":"+t+"</span>"),f(ht,o)}else 0===I.last.m&&(gt.style.opacity=1,80<=(bt+=2)?(bt=80,g(yt),g(ht)):(0,f(yt,'シェア可能時間<br>残り <span style = "font-family:FGMediumHankaku">00:00</span>')));for(let e=0;e<ut.length;e++){var s=e+35;0===I.last.m?v[s].use=!1:bt<=50&&(v[s].use=!0)}y(ft,"50%",bt+"%"),Gt()&&i&&(e="オールクリアおめでとう！"),f(gt,e),wt(1,84),xt(1),Nt(()=>{c="title"}),a0||(b(k[44],H,U),y(k[44],"97%","3%"),u(k[44],w("image/passButton.webp")))}function i0(){Ne&&(p("image/stageSelectBG.webp"),t0.xy=0),ge%2==0&&(t0.xy+=2,t0.xy=ee(t0.xy,400),y(_t,-t0.xy,-t0.xy)),u(_t,w("image/stageSelectBG.webp"))}let z=[],l0=[],s0=[];for(let a=0;a<n;a++){let t={x:360,y:540};z[a]=[],l0[a]=[],s0[a]=[];for(let e=0;e<n;e++)z[a][e]={x:0,y:0,sel:0,flip:2,dummy:0,gimmick:0},z[a][e].x=t.x-100*((n-1)/2-a),z[a][e].y=t.y-100*((n-1)/2-e),l0[a][e]=o("panel"+a+"_"+e,"img"),i(l0[a][e],r),y(l0[a][e],z[a][e].x,z[a][e].y),b(l0[a][e],h,h),l0[a][e].style.zIndex=10,l0[a][e].style.opacity=.8,l0[a][e].style.perspective="120px",l0[a][e].style.mixBlendMode="normal",u(l0[a][e],""),s0[a][e]=o("panelKids"+a+"_"+e,"img"),i(s0[a][e],l0[a][e]),y(s0[a][e],"50%","50%"),b(s0[a][e],h,h),s0[a][e].style.zIndex=10,s0[a][e].style.opacity=1,s0[a][e].style.transformStyle="preserve-3d",s0[a][e].style.mixBlendMode="normal",u(s0[a][e],"")}let N={m:0},B={x:-1,y:-1,m:0},n0=[],r0=[],m0=ce();for(let t=0;t<n;t++){n0[t]=[],r0[t]=[];for(let e=0;e<n;e++)r0[t][e]=o("panelGimmick"+t+"_"+e,"img"),i(r0[t][e],s0[t][e]),y(r0[t][e],"50%","50%"),b(r0[t][e],h,h),r0[t][e].style.zIndex=1,r0[t][e].style.mixBlendMode="multiply",u(r0[t][e],""),n0[t][e]=o("panelPoint"+t+"_"+e,"img"),i(n0[t][e],s0[t][e]),y(n0[t][e],"50%","50%"),b(n0[t][e],h,h),n0[t][e].style.zIndex=10,n0[t][e].style.mixBlendMode="normal",u(n0[t][e],"")}let p0=o("panelBG","other");function c0(){var e,t,a,o,i,l=r.getBoundingClientRect();let s=1,n=6;0===S.m&&(4===Qe&&(s=2,n=5),e=(s0[s][s].getBoundingClientRect().left-l.left)*(1/we),t=(s0[s][s].getBoundingClientRect().top-l.top)*(1/we),a=(s0[n][n].getBoundingClientRect().right-l.left)*(1/we),l=(s0[n][n].getBoundingClientRect().bottom-l.top)*(1/we),e-=3,t-=3,a+=3,l+=3,o=(z[3][3].x+z[4][4].x)/2,i=(z[3][3].y+z[4][4].y)/2,y(p0,o,i),p0.style.width=a-e+"px",p0.style.height=l-t+"px"),d<=0&&(p0.style.opacity=.5)}i(p0,r),y(p0,0,0),b(p0,h,h),p0.style.zIndex=1,p0.style.opacity=0,p0.style.outline="16px double #FFFFFF",p0.style.mixBlendMode="normal",p0.del=()=>{p0.style.opacity=0};let d0=o("cursorLine","other"),u0=(i(d0,r),y(d0,0,0),b(d0,h,h),d0.style.zIndex=100,d0.style.opacity=.5,d0.style.mixBlendMode="normal",d0.del=()=>{},[]);for(let a=0;a<4;a++){let e=[0,180,0,-180],t=[-180,0,180,0];u0[a]=o("cursorLineKids"+a,"img"),i(u0[a],cursorLine),y(u0[a],e[a],t[a]),a%2==0?b(u0[a],h,h,90):b(u0[a],h,h),u0[a].style.zIndex=0,u0[a].style.mixBlendMode="normal",u(u0[a],"")}let f0=o("window","img"),g0=(i(f0,r),y(f0,"30%","80%"),b(f0,h,h),f0.style.zIndex=15,f0.style.mixBlendMode="normal",u(f0,""),o("lock","img")),y0=(i(g0,r),y(g0,"70%","78%"),b(g0,h,h,3),g0.style.zIndex=1005,g0.style.mixBlendMode="normal",u(g0,""),o("vec","img")),h0=(i(y0,f0),y(y0,"50%","50%"),b(y0,h,h),y0.style.zIndex=1,y0.style.mixBlendMode="normal",u(y0,""),o("clear","img")),b0=(i(h0,r),y(h0,0,0),b(h0,h,h),h0.style.zIndex=1e4,h0.style.mixBlendMode="normal",u(h0,""),o("clearBack","other")),E=(i(b0,r),y(b0,"50%","50%"),b(b0,h,h),b0.style.zIndex=9990,b0.style.height=be+"px",b0.style.width=he+"px",b0.style.backgroundColor="#000000",b0.style.mixBlendMode="normal",b0.style.opacity=0,b0.del=()=>{b0.style.opacity=0},0),w0=o("flipTxt","txt"),x0=(i(w0,r),y(w0,"47%","9%"),b(w0,H,$),m(w0,"#FFFFFF","FGMediumHankaku","50","bold","right"),w0.style.zIndex=1e4,f(w0,""),o("flipTxt2","txt")),F0=(i(x0,r),y(x0,"52%","9%"),b(x0,h,$),m(x0,"#FFFFFF","FGMediumHankaku","30","bold","right"),x0.style.zIndex=1e4,f(x0,""),o("flipTxt3","txt")),v0=(i(F0,r),y(F0,"55%","9%"),b(F0,q,$),m(F0,"#FFFFFF","FGMediumHankaku","30","bold","right"),F0.style.zIndex=1e4,f(F0,""),o("stageTxt","txt")),k0=(i(v0,r),y(v0,"50%","9%"),b(v0,h,U),m(v0,"#FFFFFF","smartFontUI","30","bold","right"),v0.style.zIndex=1e4,f(v0,""),0),I0,S0=!1;function M0(){Ne&&(p("image/panel0.webp"),p("image/panel1.webp"),p("image/panel2.webp"),p("image/panelFlip0.webp"),p("image/panelFlip1.webp"),p("image/panelFlip2.webp"),p("image/line.webp"),p("image/bg.webp"),p("image/window.webp"),p("image/vec.webp"),p("image/turn0.webp"),p("image/turn1.webp"),p("image/clear0.webp"),p("image/clear1.webp"),p("image/reset.webp"),p("image/home.webp"),p("image/lock.webp"),p("image/panelGimmick1.webp"),p("image/panelGimmickDemo1.webp"),p("image/panelGimmick2.webp"),p("image/panelGimmickDemo2.webp"),"none"===O?I0=et[je]:"test"===O?I0=R:"gift"===O?I0=Jt():"editPlay"===O&&(I0=$e()[M2]),tt(I0),E=0,S={m:0,scaleX:1},l={m:0,th:0,v:0,goal:0},Je=0,N={m:0,x:900,y:"45%",backOpacity:0,time:0,moment:0},u2=I0.q,k0=I0.lock,S0=!1,k0&&(v[0].use=!1,v[1].use=!1,k[0].style.opacity=.3,k[1].style.opacity=.3),B.m=0,rt=0),-100===d&&"test"!==O&&G("start",31,"bgm/main"),0<d&&(1!==N.m&&"test"===O||j2(31,.1),j2(30,.1)),0===d&&rt++,m0=me(m0,4,4),N0(),B0(),E0(),at(),A0(),R0(),O0(),0===d&&0===l.m&&(0===F?(l.m=1,l.v=1/ue*-90*4,l.goal=l.th-90,l.goal=ee(l.goal,360),0===Je&&(l.th+=360),v[0].use=!1,v[1].use=!1,v[2].use=!1,v[3].use=!1,Je=ee(--Je,4),G("start",0,"se/confirm")):1===F?(l.m=1,l.v=1/ue*90*4,l.goal=l.th+90,l.goal=ee(l.goal,360),3===Je&&(l.th-=360),v[0].use=!1,v[1].use=!1,v[2].use=!1,v[3].use=!1,Je=ee(Je+=1,4),G("start",0,"se/confirm")):2===F?(z0(),S0=!0,G("start",5,"se/reset")):3===F&&(G("start",1,"se/back"),"none"===O?c="stageSelect":"test"===O?c="edit1":"gift"===O?c="edit0":"editPlay"===O&&(c="saveLoad",I2=-1,C="editPlay"))),1===l.m&&(l.th+=l.v,te(l.th,l.v,l.goal,()=>{l.th=l.goal,l.v=0,l.m=0,k0||(v[0].use=!0,v[1].use=!0),v[2].use=!0,v[3].use=!0})),l.th+=l.v,v[0].x="60%",v[0].y="79%",v[1].x="80%",v[1].y="77%",v[2].x="97%",v[2].y="3%",v[3].x="3%",v[3].y="3%",k0&&u(g0,w("image/lock.webp")),0<=d&&1===N.m&&(0===d&&j2(31,.01),N.moment<=1&&N.moment++,1===N.moment&&(E<=u2?G("start",30,"bgm/clear1"):G("start",30,"bgm/clear0")),v[0].use=!1,v[1].use=!1,v[2].use=!1,v[3].use=!1,N.x-=30,N.x<=he/2&&(N.x=he/2),N.backOpacity+=.01,.7<=N.backOpacity&&(N.backOpacity=.7),N.time++,N.time>=3.2*ue||N.time>=.7*ue&&x[0].ondown)&&0===d&&("none"===O?(c="stageSelect",I.clear[je]<2&&E<=u2?I.clear[je]=2:I.clear[je]<1&&(I.clear[je]=1),I.last.stage=je,I.last.flip=E,I.last.m=1,I.last.look=0,I.last.clock=Date.now(),Ue()):"test"===O?(E<=u2&&(d2=1),c="edit1"):"gift"===O?c="edit0":"editPlay"===O&&(c="saveLoad",I2=-1,C="editPlay"));for(let e=0;e<2;e++)y(k[e],v[e].x,v[e].y),u(k[e],w(`image/turn${e}.webp`));b(k[2],H,U),y(k[2],v[2].x,v[2].y),u(k[2],w("image/reset.webp")),b(k[3],q,U),y(k[3],v[3].x,v[3].y),u(k[3],w("image/home.webp")),0===N.m&&1===je&&"none"===O&&1<=E&&0===S.m&&(z0(),S0=!0,G("start",5,"se/reset")),1===N.m&&(y(h0,N.x,N.y),h0.style.filter=`brightness(${1+ge%2*2})`,E<=u2?u(h0,w("image/clear1.webp")):u(h0,w("image/clear0.webp")),b0.style.opacity=N.backOpacity),E<=u2?m(w0,"#FFFF72"):E<u2+10&&m(w0,"#FFFFFF"),99<=E?f(w0,"99"):f(w0,E),f(x0,"/"),f(F0,u2);let e="ステージ "+`<span style = "font-family: FGMediumHankaku">${je}</span>`;var t;"test"===O?e="エディットテストプレイ":"gift"===O?e="もらったステージに挑戦":"editPlay"===O&&(t=v2,e="エディットステージ"+t[M2]),f(v0,e),b(y0,h,h,l.th),u(y0,w("image/vec.webp")),u(f0,w("image/window.webp")),u(D2,w("image/bg.webp")),pt(),c0(),st()}function T0(){let a=!1;for(let t=0;t<n;t++){for(let e=0;e<n;e++){var o=Math.abs(x[0].x-z[t][e].x),i=Math.abs(x[0].y-z[t][e].y),l=0<t&&t<n-1&&0<e&&e<n-1&&6===Qe,s=1<t&&t<n-2&&1<e&&e<n-2&&4===Qe;if(o<=Ze/2&&i<=Ze/2&&(l||s)){B.m=1,B.x=t,B.y=e,a=!0;break}}if(a)break}a||(B.m=0)}function z0(){var a=I0.stage;for(let t=0;t<n;t++)for(let e=0;e<n;e++)2!==z[t][e].flip&&(z[t][e].sel=1),z[t][e].flip===a[e][t]%10?z[t][e].dummy=1:z[t][e].dummy=0;v[0].use=!1,v[1].use=!1,v[2].use=!1,v[3].use=!1,S.m=1,E=0}function N0(e=1){"mouse"===Ae?(T0(),_e(),Ye&&x[0].ondown&&1===B.m&&-1!==B.x&&-1!==B.y&&0===S.m&&0===N.m&&(S.m=1,G("start",3,"se/flip0"),S0=!1,E+=e)):(x[0].hold&&(T0(),_e()),x[0].onup&&(Ye&&1===B.m&&-1!==B.x&&-1!==B.y&&0===S.m&&0===N.m&&(S.m=1,G("start",3,"se/flip0"),S0=!1,E+=e),B.m=0))}function B0(e=()=>{k0||(v[0].use=!0,v[1].use=!0),v[2].use=!0,v[3].use=!0}){1===S.m?(S.scaleX-=.18,S.scaleX<=0&&(S.m=2,S.scaleX=0)):2===S.m?S.m=3:3===S.m&&(S.scaleX+=.1,1<=S.scaleX)&&(S.m=0,S.scaleX=1,B.x=-1,B.y=-1,S0||G("start",4,"se/flip1"),e())}function E0(){for(let t=0;t<n;t++)for(let e=0;e<n;e++)2===S.m&&2!==z[t][e].flip&&1===z[t][e].sel&&0===z[t][e].dummy&&(z[t][e].flip^=1)}function A0(){for(let t=0;t<n;t++)for(let e=0;e<n;e++){var a;0===S.m&&1===B.m&&1===z[t][e].sel&&0===N.m?(2===z[t][e].flip?n0[t][e].style.opacity=.3:n0[t][e].style.opacity=1,u(n0[t][e],w("image/panelFlip"+de(m0.p)+".webp")),l0[t][e].style.filter=`brightness(${1.05+.05*Math.sin(2*ge*(1/(2*Math.PI)))})`+Y0(t,e)):(g(n0[t][e]),0!==S.m&&1===z[t][e].sel?l0[t][e].style.filter=`brightness(${1+ge%2})`+Y0(t,e):(a=Y0(t,e),l0[t][e].style.filter=""!==a?a:"none"))}}function R0(){for(let e=0;e<4;e++)"touch"===Ae&&0===S.m&&1===B.m&&0===N.m?(y(d0,x[0].x,x[0].y),u(u0[e],w("image/line.webp"))):g(u0[e])}function O0(){for(let t=0;t<n;t++)for(let e=0;e<n;e++){var a;0!==S.m&&1===z[t][e].sel?1===S.m?(a=90*-S.scaleX+90,b(s0[t][e],h,h,0,.01*Ze*.8,1,1,`rotateY(${a}deg)`)):(a=90*S.scaleX+270,b(s0[t][e],h,h,0,.01*Ze*.8,1,1,`rotateY(${a}deg)`)):b(s0[t][e],h,h,0,.01*Ze,1,1,"rotateY(0deg)"),2===z[t][e].flip?(u(s0[t][e],w("image/panel"+z[t][e].flip+".webp")),g(r0[t][e]),0!==z[t][e].gimmick&&(z[t][e].gimmick=0)):(0===z[t][e].gimmick?g(r0[t][e]):u(r0[t][e],`image/panelGimmick${z[t][e].gimmick}.webp`),u(s0[t][e],w("image/panel"+z[t][e].flip+".webp")))}}let C0=o("logo","img"),L0=(i(C0,r),y(C0,"50%","20%"),b(C0,h,h),C0.style.zIndex=10,C0.style.mixBlendMode="normal",u(C0,""),o("copyRight","txt")),G0=(i(L0,r),y(L0,"99%","75%"),b(L0,H,h),m(L0,"#FFFFFF","smartFontUI","20","normal","right"),L0.style.zIndex=1e4,f(L0,""),o("gift","img")),D0=(i(G0,r),y(G0,"0%","60%"),b(G0,q,h),G0.style.zIndex=10,G0.style.mixBlendMode="normal",u(G0,""),0),P0={opacity:0},q0={opacity:0},U0=0;function H0(){0===U0?setTimeout(()=>{G("start",0,"se/confirm"),U0=1},150):G("start",0,"se/confirm")}function $0(){if(Ne){P0.opacity=0,q0.opacity=0,p("image/logo.webp"),p("image/titleBG.webp"),p("image/startButton.webp"),p("image/passwordButton.webp"),p("image/editButton.webp"),p("image/otherButton.webp"),p("image/soundButton0.webp"),p("image/soundButton1.webp"),p("image/soundButton2.webp"),p("image/gift.webp");for(let e=0;e<5;e++)v[e].use=!1;for(let e=0;e<ut.length;e++){var t=e+35;1<=q0.opacity&&(v[t].use=!1)}}if(-100===d&&(D0=0,_2=I.sound),-99<=d&&(P0.opacity+=4,100<=P0.opacity&&(P0.opacity=100),50<=P0.opacity)&&(q0.opacity+=.05),0===d){if(1<=q0.opacity){q0.opacity=1;for(let e=0;e<5;e++)v[e].use=!0}0===F?(c="stageSelect",O="none",H0()):1===F?(c="password",H0()):2===F?(c="edit0",H0()):3===F?(c="other",H0()):4===F&&(_2=ee(--_2,3),I.sound=_2,Ue())}D0+=2*Math.PI/(2*ue),Jt()?(y(G0,.9*Math.sin(D0)+"%","60%"),G0.style.opacity=q0.opacity,u(G0,w("image/gift.webp"))):g(G0);var a=["image/startButton.webp","image/passwordButton.webp","image/editButton.webp","image/otherButton.webp"];for(let e=0;e<4;e++)k[e].style.opacity=q0.opacity,b(k[e],H,h),y(k[e],"100%",45+7.5*e+"%"),u(k[e],w(a[e]));k[4].style.opacity=q0.opacity,b(k[4],H,h),y(k[4],"97%","33%"),u(k[4],w(`image/soundButton${_2}.webp`)),f(L0,"&copy;2026 RAMUNE SPARK"),b(C0,h,h,0,.01*(100-P0.opacity+100)),C0.style.opacity=.01*P0.opacity,L0.style.opacity=q0.opacity,C0.style.filter=`blur(${100-P0.opacity}px)`,u(C0,w("image/logo.webp")),u(D2,w("image/titleBG.webp"));for(let e=0;e<ut.length;e++){var o=e+35;1<=q0.opacity&&(v[o].use=!0),k[o].style.opacity=q0.opacity}wt(1,86),xt(0)}let K0=o("passTxt","img"),J0=(i(K0,r),y(K0,"50%","10%"),b(K0,h,h),K0.style.zIndex=100,u(K0,""),o("inputLine","other")),W0=(i(J0,r),y(J0,0,0),b(J0,h,h),J0.style.zIndex=100,J0.style.visibility="hidden",J0.style.width="50px",J0.style.height="10px",J0.style.backgroundColor="#FFFFFF",J0.style.mixBlendMode="normal",J0.del=()=>{J0.style.visibility="hidden"},[]),V0=0,X0=!1;function Y0(a,o){if(X0){var e=0<a&&a<n-1&&0<o&&o<n-1&&6===Qe;if(1<a&&a<n-2&&1<o&&o<n-2&&4===Qe||e){if(1!==z[a][o].flip)return"";{let e=11,t=2;return 4===Qe&&(e=7,t=4),` hue-rotate(${5*ge%360-360/e*(a+o-t)}deg)`}}}return""}let A={check:!1,t:0,st:0};function _0(){if(Ne){for(let e=0;e<10;e++)p(`image/passkey${e}.webp`);p("image/passkeyBack.webp"),p("image/passwordBG.webp"),p("image/passwordText.webp"),p("image/helpButton.webp"),W0=[0,0,0,0],V0=0,A={check:!1,t:0,st:0,next:""};for(let e=0;e<4;e++)m(Bt[e],"#FFFFFF")}-100===d&&G("start",31,"bgm/password"),0<d&&j2(31,.1),u(D2,w("image/passwordBG.webp")),u(K0,w("image/passwordText.webp"));var t=[50,30,50,70,30,50,70,30,50,70],a=[85,55,55,55,65,65,65,75,75,75];for(let e=0;e<10;e++)y(k[e],t[e]+"%",a[e]+"%"),u(k[e],`image/passkey${e}.webp`);if(y(k[10],"70%","85%"),u(k[10],"image/passkeyBack.webp"),V0<4)for(let e=0;e<10;e++)if(F===e){W0[V0]=e,++V0<4&&G("start",0,"se/confirm");break}10===F&&(W0[V0]=0,V0--,G("start",1,"se/back"),V0<0?V0=0:W0[V0]=0);var o=[35,45,55,65];for(let e=0;e<4;e++){var i=30+.4*Math.sin(ge*(1/(10*Math.PI))+e*(Math.PI/2)),l=(y(Bt[e],o[e]+"%",i+"%"),W0[e]);f(Bt[e],0===l?"O":l),e===V0&&(y(J0,o[e]+"%",5+i+"%"),J0.style.visibility="visible",J0.style.opacity=Math.floor(ge/8)%2)}if(4<=V0)if(J0.style.visibility="hidden",0===A.t){for(let e=0;e<11;e++)v[e].use=!1;v[43].use=!1,A.check=!1;var s=W0;for(let e=1;e<Ct.length;e++){var n=Ct[e];if(n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]&&n[3]===s[3]){A.st=e,A.check=!0,O="none",A.next="game";break}}if(5===s[0]&&6===s[1]&&5===s[2]&&6===s[3])A.next="title",A.check=!0,X0=!0;else if(4===s[0]&&6===s[1]&&2===s[2]&&2===s[3])A.next="edit0",I.editCheat=!0,A.check=!0;else if(7===s[0]&&3===s[1]&&8===s[2]&&2===s[3]){A.next="stageSelect";for(let e=1;e<=24;e++)I.clear[e]<2&&(I.clear[e]=2);A.check=!0}A.check?0===d&&(G("start",2,"se/passOK"),A.t=+ue,j2(31,.015)):(G("start",3,"se/passMiss"),A.t=3*ue)}else if(A.check){for(let e=0;e<4;e++)m(Bt[e],"#beff3c");if(A.t--,A.t<=0&&0===d){if("game"===A.next){for(let e=1;e<=A.st;e++)I.clear[e]<2&&1===e?I.clear[e]=2:I.clear[e]<1&&(I.clear[e]=1);24<=(je=A.st+1)&&(je=24)}Ue(),c=A.next}}else{A.t--;var r=3*ue-A.t,r=255-(90+90*Math.sin(.1*r));for(let e=0;e<4;e++)m(Bt[e],`rgb(${r}, 0, 0)`);if(A.t<=0){for(let e=0;e<11;e++)v[e].use=!0;v[43].use=!0;for(let e=0;e<4;e++)m(Bt[e],"#FFFFFF");A.t=0,V0--,W0[V0]=0}}if(A.t,v[11].use=!0,k[11].opacity=1,b(k[11],H,U),y(k[11],"97%","3%"),u(k[11],w("image/helpButton.webp")),11===F&&(M.m=1,M.mode="pass",M.button=[1],M.size=300,M.text="ステージセレクト画面のパスワードをここで入力すると、ノーマルモードを続きから遊ぶことができます。<br>ほかの端末で続きを遊ぶときなどにお使いください。<br><br>※★評価は基本的に引き継がれません。<br>※パスワードで再開した場合、現在のステージ進行状況と統合されセーブされます。",f(T[45],"OK"),G("start",0,"se/confirm")),"pass"===M.mode&&45===F&&(M.m=4,G("start",0,"se/confirm")),100===d)for(let e=0;e<4;e++)m(Bt[e],"#FFFFFF");Nt(()=>{c="title"})}let R={lock:!1,size:6,q:4,stage:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]},j0=[];for(let t=0;t<2;t++){let e=[k[3],k[4]];j0[t]=o("giftPoint"+t,"img"),i(j0[t],e[t]),y(j0[t],"100%","0%"),b(j0[t],h,h),j0[t].style.zIndex=10,j0[t].style.mixBlendMode="normal",u(j0[t],"")}let Q0=!1;function Z0(){Ne&&(p("image/mode0.webp"),p("image/mode1.webp"),p("image/mode2.webp"),p("image/mode3.webp"),p("image/giftPoint.webp")),-100!==d||L[31]&&"play"===L[31].state||G("start",31,"bgm/edit"),0<d&&("title"===c||"game"===c)&&j2(31,.1),f(jt,"エディットメニュー"),i0();var t=[2,0,0,1,1,3],a=[30,40,48,58,66,85];for(let e=0;e<6;e++)y(k[e],"50%",a[e]+"%"),D(k[e]).style.opacity=.7,u(k[e],w(`image/mode${t[e]}.webp`));if(e2()?(v[1].use=!0,v[2].use=!0,k[1].style.opacity=1,k[2].style.opacity=1):(v[1].use=!1,v[2].use=!1,k[1].style.opacity=.5,k[2].style.opacity=.5),Jt()?(v[3].use=!0,v[4].use=!0,v[5].use=!0,k[3].style.opacity=1,k[4].style.opacity=1,k[5].style.opacity=1):(v[3].use=!1,v[4].use=!1,v[5].use=!1,k[3].style.opacity=.5,k[4].style.opacity=.5,k[5].style.opacity=.5),0===F?(I2=-1,c="edit1",editNoSave=!1,R={m:1,edit:1,editSetting:0,lock:0,size:4,q:4,stage:[[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,0,0,0,0,2,2],[2,2,0,0,0,0,2,2],[2,2,0,0,0,0,2,2],[2,2,0,0,0,0,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2]]},G("start",d2=0,"se/confirm")):1===F?(c="saveLoad",C="editPlay",I2=-1,G("start",0,"se/confirm")):2===F?(c="saveLoad",C="load",I2=-1,G("start",0,"se/confirm")):3===F?(c="game",O="gift",G("start",0,"se/confirm"),Q0=!0):4===F?(I2=-1,c="saveLoad",C="giftSave",G("start",0,"se/confirm")):5===F&&(M.m=1,M.mode="erase",M.button=[1,0],M.size=250,M.text="受け取ったステージはセーブされていません。<br>本当に消しますか？",f(T[45],"ちょっと待って"),f(T[46],"消去する"),G("start",0,"se/confirm")),"erase"===M.mode&&(45===F?(G("start",1,"se/back"),M.m=4):46===F&&(G("start",0,"se/confirm"),M.m=4,Ht.delete("edit"),window.history.replaceState({},"",Ut.toString()),$t=null)),Jt()&&!Q0)for(let e=0;e<1;e++)j0[e].style.filter=`brightness(${1.3+.3*Math.sin(.2*ge)})`,u(j0[e],w("image/giftPoint.webp"));else for(let e=0;e<2;e++)g(j0[e]);f(T[0],"はじめから作る"),f(T[1],"プレイ"),f(T[2],"ロードして編集"),f(T[3],"受け取ったステージをプレイ"),f(T[4],"受け取ったステージをセーブ"),f(T[5],"受け取ったステージを消す"),Nt(()=>{c="title"})}function e2(){let t=!1;var a=$e();for(let e=0;e<12;e++)if(a[e].m){t=!0;break}return t}let t2=o("editCursor","img"),a2=(i(t2,r),y(t2,0,0),b(t2,h,h),t2.style.zIndex=100,t2.style.mixBlendMode="normal",u(t2,""),o("editFlipL","txt")),o2=(i(a2,r),y(a2,"10%","75%"),b(a2,q,h),m(a2,"#FFFFFF","smartFontUI","37","normal","left"),a2.style.zIndex=100,f(a2,""),o("editFlipR","txt")),i2=(i(o2,r),y(o2,"80%","75%"),b(o2,H,h),m(o2,"#FFFFFF","smartFontUI","37","normal","right"),o2.style.zIndex=100,f(o2,""),o("editLockL","txt")),l2=(i(i2,r),y(i2,"10%","84%"),b(i2,q,h),m(i2,"#FFFFFF","smartFontUI","37","normal","left"),i2.style.zIndex=100,f(i2,""),o("editLockR","txt")),s2=(i(l2,r),y(l2,"80%","84%"),b(l2,H,h),m(l2,"#FFFFFF","smartFontUI","37","normal","right"),l2.style.zIndex=100,f(l2,""),o("editSizeL","txt")),n2=(i(s2,r),y(s2,"10%","93%"),b(s2,q,h),m(s2,"#FFFFFF","smartFontUI","37","normal","left"),s2.style.zIndex=100,f(s2,""),o("editSizeR","txt")),r2=(i(n2,r),y(n2,"80%","93%"),b(n2,H,h),m(n2,"#FFFFFF","smartFontUI","37","normal","right"),n2.style.zIndex=100,f(n2,""),o("testPlayAlert","txt")),m2=(i(r2,r),y(r2,"50%","88%"),b(r2,h,h),m(r2,"#FFFF00","smartFontUI","37","normal","center"),r2.style.zIndex=1e4,f(r2,""),0),p2=0,c2=0,d2=0,O="none",u2=50;function f2(){Ne&&(p("image/mode0.webp"),p("image/panel0.webp"),p("image/panel1.webp"),p("image/panel2.webp"),p("image/panelFlip0.webp"),p("image/panelFlip1.webp"),p("image/panelFlip2.webp"),p("image/line.webp"),p("image/bg.webp"),p("image/window.webp"),p("image/vec.webp"),p("image/turn0.webp"),p("image/turn1.webp"),p("image/clear0.webp"),p("image/clear1.webp"),p("image/editMark0.webp"),p("image/editMark1.webp"),p("image/editMark2.webp"),p("image/editMark3.webp"),p("image/editMark4.webp"),p("image/editMark0s.webp"),p("image/editMark1s.webp"),p("image/editMark2s.webp"),p("image/editMark3s.webp"),p("image/editMark4s.webp"),p("image/panelGimmick1.webp"),p("image/panelGimmick2.webp"),p("image/editTileButton0.webp"),p("image/editTileButton1.webp"),p("image/editTileButton2.webp"),p("image/editGimmickButton0.webp"),p("image/editGimmickButton1.webp"),p("image/editGimmickButton2.webp"),p("image/pageChange0.webp"),p("image/pageChange1.webp"),p("image/editVecButton0.webp"),p("image/editVecButton1.webp"),p("image/editVecButton2.webp"),p("image/editVecButton3.webp"),p("image/editCursor.webp"),p("image/test.webp"),p("image/save.webp"),E=0,S={m:0,scaleX:1},l={m:0,th:0,v:0,goal:0},Je=0,N={m:0,x:900,y:"45%",backOpacity:0,time:0},B.m=0,tt(R,490),m2=0,1===d2&&(m2=4),p2=1,c2=1),-100!==d||L[31]&&"play"===L[31].state||G("start",31,"bgm/edit"),"shareAllow"===M.mode?45===F?(M.m=4,G("start",1,"se/back")):46===F&&(M.m=4,I.shareAllow=!0,Ue(),G("start",0,"se/confirm")):"testEnd"===M.mode?45===F?(M.m=4,m2=4,G("start",1,"se/back")):46===F&&(M.m=4,d2=0,h2(),G("start",0,"se/confirm")):"end"===M.mode?45===F?(M.m=4,G("start",0,"se/confirm")):46===F&&(c="edit0",G("start",1,"se/back")):"size"===M.mode?46===F?(R.size=4,R.stage=g2(),tt(R,490),M.m=4,G("start",0,"se/confirm"),editNoSave=!0):45===F&&(M.m=4,G("start",1,"se/back")):"notOK"===M.mode&&45===F&&(M.m=4,G("start",0,"se/confirm"));if(!I.editCheat){k[3].style.opacity=.2;for(let t=0;t<8;t++)for(let e=0;e<8;e++)z[t][e].gimmick=0}f(jt,["エディット","チェックOK"][d2]),0<=F&&F<5&&(m2=(d2&&4!==F?(M.m=1,M.mode="testEnd",M.button=[1,0],M.size=300,M.text="ステージを編集しますか？<br>「編集する」を選ぶと、セーブや共有の際に再度テストプレイが必要になります。",f(T[46],"編集する"),f(T[45],"ちょっと待って")):h2(),F),G("start",0,"se/confirm")),y2(),m0=me(m0,4,4),B0(()=>{}),E0(),A0();var a=[14,32,50,68,86];for(let t=0;t<5;t++){let e="";3!==t||I.editCheat?m2===t?(e="s",v[t].use=!1):v[t].use=!0:v[t].use=!1,y(k[t],a[t]+"%","67%"),u(k[t],w(`image/editMark${t}${e}.webp`))}for(let t=0;t<8;t++)for(let e=0;e<8;e++)R.stage[t][e]=z[e][t].flip,R.stage[t][e]+=10*z[e][t].gimmick;if(O0(),c0(),i0(),v[15].x="97%",v[15].y="3%",b(k[15],H,U),y(k[15],v[15].x,v[15].y),0===d2?u(k[15],"image/test.webp"):u(k[15],"image/save.webp"),15===F&&(G("start",0,"se/confirm"),0===d2?ot()?(c="game",O="test"):(M.m=1,M.mode="notOK",M.button=[0],M.size=250,M.text="白・カラーのパネルがそれぞれ1枚以上ないと、テストプレイできません。",f(T[45],"OK")):(c="saveLoad",C="save")),Nt(()=>{editNoSave?(M.m=1,M.mode="end",M.button=[1,0],M.size=250,M.text="エディットをやめてメニュー画面に戻りますか？<br>セーブしていないデータは失われます。",f(T[46],"メニューへ"),f(T[45],"ちょっと待って")):c="edit0"}),100===d)for(let t=0;t<8;t++)for(let e=0;e<8;e++)z[t][e].sel=0,l0[t][e].style.opacity=.8}function g2(){var a=JSON.parse(JSON.stringify(R.stage));for(let t=0;t<8;t++)for(let e=0;e<8;e++)4===R.size?(t<=1||6<=t||e<=1||6<=e)&&(a[t][e]=2):6===R.size&&(t<=0||7<=t||e<=0||7<=e?a[t][e]=2:(t<=1||6<=t||e<=1||6<=e)&&(a[t][e]=0));return console.log(a),a}function y2(){if(d2||0!==m2)if(d2||1!==m2)if(d2||2!==m2)if(d2||3!==m2){if(d2||4===m2){var t=[5,7,9],a=[6,8,10],o=[75,84,93];for(let e=0;e<1;e++)y(k[t[e]],"50%",o[e]+"%"),y(k[a[e]],"88%",o[e]+"%"),u(k[t[e]],w("image/pageChange0.webp")),u(k[a[e]],w("image/pageChange1.webp"));5!==F&&6!==F||(R.editSetting^=1,G("start",5,"se/select"),editNoSave=!0);var e=["ダメ！","いいよ"];f(a2,"第三者による<br>編集・共有"),f(o2,e[R.editSetting]),0===d2?f(r2,"テストプレイをノルマ内でクリアすれば、<br>セーブや共有が可能になります！"):I.shareAllow?(gt.style.opaciy=1,f(gt,"ステージをシェア"),wt(1,92),xt(2),g(T[18]),g(k[18]),D(k[18]).style.opacity=1):(y(k[18],"50%","90%"),D(k[18]).style.opacity=.7,f(T[18],"ステージをシェアする"),u(k[18],w("image/mode0.webp"))),18===F&&(G("start",0,"se/confirm"),M.m=1,M.mode="shareAllow",M.button=[0,1],M.size=600,M.text=E2+"<br><br>※この内容は、タイトル画面の「その他」からいつでも確認できます。",f(T[45],"ちょっと待って"),f(T[46],"OK"))}}else{if(T0(),0===M.m&&x[0].hold&&B.m){let e="se/paint";0===c2&&(e="se/destroy"),(!L[30]||"play"!==L[30].state||0<L[30].fadeOut||L[30].pathName!==e)&&(G("start",30,e),editNoSave=!0),z[B.x][B.y].gimmick=c2;for(let t=0;t<8;t++)for(let e=0;e<8;e++)t===B.x&&e===B.y?l0[t][e].style.opacity=.8*ge%2:l0[t][e].style.opacity=.8;j2(30,0)}else{for(let t=0;t<8;t++)for(let e=0;e<8;e++)l0[t][e].style.opacity=.8;j2(30,.2)}var i=[28,50,72],l=[5,6,7];for(let e=0;e<3;e++)F===l[e]&&(c2=e,G("start",5,"se/select")),y(k[l[e]],i[e]+"%","85%"),u(k[l[e]],w(`image/editGimmickButton${e}.webp`));y(t2,i[c2]+"%","75%"),b(t2,h,h,0,1,Math.sin(.1*ge)),u(t2,w("image/editCursor.webp"))}else{0===M.m&&(N0(0),R0()),1===S.m&&(editNoSave=!0);var s=[17,39,61,82],n=[5,6,7,8];for(let e=0;e<4;e++)F===n[e]&&(Je=e,G("start",5,"se/select")),y(k[n[e]],s[e]+"%","85%"),u(k[n[e]],w(`image/editVecButton${e}.webp`));y(t2,s[Je]+"%","75%"),b(t2,h,h,0,1,Math.sin(.1*ge)),u(t2,w("image/editCursor.webp"))}else{if(T0(),0===M.m&&x[0].hold&&B.m){let e="se/paint";2===p2&&(e="se/destroy"),(!L[30]||"play"!==L[30].state||0<L[30].fadeOut||L[30].pathName!==e)&&(G("start",30,e),editNoSave=!0),z[B.x][B.y].flip=p2;for(let t=0;t<8;t++)for(let e=0;e<8;e++)t===B.x&&e===B.y?l0[t][e].style.opacity=ge%2*.8:l0[t][e].style.opacity=.8;j2(30,0)}else{for(let t=0;t<8;t++)for(let e=0;e<8;e++)l0[t][e].style.opacity=.8;j2(30,.2)}var r=[28,50,72],m=[5,6,7];for(let e=0;e<3;e++)F===m[e]&&(p2=e,G("start",5,"se/select")),y(k[m[e]],r[e]+"%","85%"),u(k[m[e]],w(`image/editTileButton${e}.webp`));y(t2,r[p2]+"%","75%"),b(t2,h,h,0,1,Math.sin(.1*ge)),u(t2,w("image/editCursor.webp"))}else{var p=[5,7,9],c=[6,8,10],d=[75,84,93];for(let e=0;e<3;e++)y(k[p[e]],"50%",d[e]+"%"),y(k[c[e]],"88%",d[e]+"%"),u(k[p[e]],w("image/pageChange0.webp")),u(k[c[e]],w("image/pageChange1.webp"));5===F?(R.q--,R.q<1&&(R.q=1),editNoSave=!0,G("start",5,"se/select")):6===F?(R.q++,9<R.q&&(R.q=9),editNoSave=!0,G("start",5,"se/select")):7===F||8===F?(R.lock^=1,editNoSave=!0,G("start",5,"se/select")):9!==F&&10!==F||(4===R.size?(R.size=6,R.stage=g2(),tt(R,490),G("start",5,"se/select"),editNoSave=!0):6===R.size&&(M.m=1,M.mode="size",M.button=[0,1],M.size=250,M.text="サイズを4×4に変えますか？<br>ステージの外周部分が失われます。",f(T[45],"ちょっと待って"),f(T[46],"変える"),G("start",0,"se/confirm"))),f(a2,"ノルマ"),f(o2,R.q),f(i2,"ロック"),f(l2,ae[R.lock]),f(s2,"サイズ"),f(n2,R.size+"×"+R.size)}}function h2(){for(let e=5;e<30;e++)g(k[e]);g(t2);for(let t=0;t<8;t++)for(let e=0;e<8;e++)z[t][e].sel=0,l0[t][e].style.opacity=.8;g(a2),g(o2),g(i2),g(l2),g(s2),g(n2),g(r2),g(gt),D(k[18]).style.opacity=1,g(T[18]),g(k[18]);for(let e=0;e<ut.length;e++){var t=e+35;g(k[t])}}let b2=o("saveText","txt"),w2=(i(b2,r),y(b2,"50%","80%"),b(b2,h,h),m(b2,"#FFFFFF","smartFontUI","45","normal","center"),b2.style.zIndex=1e4,f(b2,""),o("panelDemoBG","other")),x2=(i(w2,r),y(w2,"50%","85%"),b(w2,h,h),w2.style.zIndex=100,w2.style.opacity=.7,w2.style.mixBlendMode="normal",w2.del=()=>{w2.style.width="0px",w2.style.height="0px"},o("saveMiniText","txt")),F2=(i(x2,r),y(x2,"50%","97%"),b(x2,h,h),m(x2,"#FFFF00","smartFontUI","25","normal","center"),x2.style.zIndex=1e4,f(x2,""),[]);for(let t=1;t<=6;t++){F2[t]=[];for(let e=1;e<=6;e++)F2[t][e]=o(`panelDemo${t}_`+e,"img"),i(F2[t][e],w2),y(F2[t][e],42*(e-1),42*(t-1)),b(F2[t][e],q,U),F2[t][e].style.zIndex=10,F2[t][e].style.mixBlendMode="normal",u(F2[t][e],"")}let v2=["A","B","C","D","E","F","G","H","J","K","L","M"];function k2(a,o=-1){if(w2.style.width="252px",w2.style.height="252px",-1!==o&&1===a[o].m){var i=a[o].stage;for(let t=1;t<=6;t++)for(let e=1;e<=6;e++){var l=i[t][e];1===a[o].m&&2!==l?u(F2[t][e],w(`image/panelDemo${l}.webp`)):g(F2[t][e])}f(x2,`スロット${v2[o]} 現在のセーブデータ`)}else{for(let t=1;t<=6;t++)for(let e=1;e<=6;e++)g(F2[t][e]);g(x2)}}let I2=-1,C="giftSave",S2=0,M2=0;function T2(){Ne&&(p("image/stageEditMark0.webp"),p("image/stageEditMark1.webp"),p("image/stageEditMark2.webp"),p("image/stageEditMark2_Lock.webp"),p("image/mode0.webp"),p("image/mode1.webp"),p("image/panelDemo0.webp"),p("image/panelDemo1.webp"),p("image/panelDemo10.webp"),p("image/panelDemo11.webp"),p("image/panelDemo20.webp"),p("image/panelDemo21.webp"),S2=2*ue,-1===I2)&&(Fe=20),-100!==d||"erase"===C||L[31]&&"play"===L[31].state||G("start",31,"bgm/edit"),0<d&&"game"===c&&j2(31,.1);var t=$e(),a=v2;if("giftSave"===C||"save"===C?f(jt,"データセーブ"):"editPlay"===C?f(jt,"エディットプレイ"):"load"===C?f(jt,"ロードして編集"):"erase"===C&&f(jt,"データ消去"),0===Fe){f(T[0],`スロット${a[I2]}に上書きセーブ`),f(T[1],"他のスロットにセーブ");var o=[0,1],i=[45,55];for(let e=0;e<2;e++)y(k[e],"50%",i[e]+"%"),D(k[e]).style.opacity=.7,u(k[e],`image/mode${o[e]}.webp`);0===F?(z2(t,a,I2),k2(t,I2),G("start",0,"se/confirm")):1===F&&(Fe=1,G("start",0,"se/confirm"))}if(1<=Fe&&Fe<20){v[43].use=!1;for(let e=0;e<2;e++)g(k[e]),g(T[e]);20<=++Fe&&(v[43].use=!0)}if(20<=Fe){var l=["25%","75%"];for(let e=0;e<12;e++)v[e].x=l[e%2],v[e].y=100*Math.floor(e/2)+350;for(let e=0;e<12;e++)if(F===e){G("start",0,"se/confirm"),"giftSave"!==C&&"save"!==C||(z2(t,a,e),k2(t,e)),"erase"===C?(N2(t,a,e),k2(t,e)):"editPlay"===C?(c="game",O="editPlay",M2=e):"load"===C&&(t[e].edit?(I2=e,c="edit1",editNoSave=!1,R=JSON.parse(JSON.stringify(t[e])),d2=1):(M.m=1,M.mode="notLoad",M.button=[0],M.size=250,M.text="制作者が編集を許可していないステージのため、<br>利用できません。",f(T[45],"OK")));break}for(let e=0;e<12;e++){f(T[e],a[e]),y(k[e],v[e].x,v[e].y),D(k[e]).style.opacity=.7;var s=t[e].m;"editPlay"!==C&&"load"!==C&&"erase"!==C||0===s&&(v[e].use=!1,k[e].style.opacity=.5),0===t[e].m||t[e].edit?u(k[e],w("image/stageEditMark"+s+".webp")):"load"===C?u(k[e],w("image/stageEditMark2_Lock.webp")):u(k[e],w("image/stageEditMark2.webp"))}}"notLoad"===M.mode&&45===F&&(M.m=4,G("start",0,"se/confirm"));for(let e=0;e<12;e++)if(M.mode==="save"+e){if(45===F)M.m=4,G("start",1,"se/back"),k2(t,-1);else if(46===F){M.m=4,I2=e,G("start",0,"se/confirm"),k2(t,-1),editNoSave=!1,"giftSave"===C?(Ke(e,Jt()),Ht.delete("edit"),window.history.replaceState({},"",Ut.toString()),$t=null):"save"===C&&Ke(e,R),S2=2*ue,f(b2,`<span style="color:#FFFF00">スロット${a[e]}</span>にデータを<br>セーブしました！`),Ue();for(let e=0;e<12;e++)v[e].use=!1;v[43].use=!1}}else if(M.mode==="erase"+e)if(45===F)M.m=4,G("start",1,"se/back"),k2(t,-1);else if(46===F){M.m=4,I2=e,G("start",0,"se/confirm"),k2(t,-1);var n=JSON.parse(JSON.stringify(t[e]));n.m=0,Ke(e,n),S2=2*ue,f(b2,`<span style="color:#FFFF00">スロット${a[e]}</span>のデータを<br>消去しました！`),Ue();for(let e=0;e<12;e++)v[e].use=!1;v[43].use=!1}v[43].use||--S2<=0&&(c="giftSave"===C?"edit0":"erase"===C?"other":"edit1"),!v[43].use&&S2>=1.5*ue?b2.style.opacity=0:(b2.style.opacity=1,i0()),Nt(()=>{c="giftSave"===C||"editPlay"===C||"load"===C?"edit0":"erase"===C?"other":"edit1"})}function z2(e,t,a){M.m=1,M.mode="save"+a,M.button=[0,1],0===e[a].m?(M.size=200,M.text=`<span style="color:#FFFF00">スロット${t[a]}</span>にステージデータをセーブしますか？`,f(T[46],"セーブする")):(M.size=250,M.text=`<span style="color:#FFFF00">スロット${t[a]}</span>には既にデータが入っています。<br>上書きしてステージデータをセーブしますか？`,f(T[46],"上書きセーブ")),f(T[45],"やっぱりやめる")}function N2(e,t,a){M.m=1,M.mode="erase"+a,M.button=[1,0],M.size=250,M.text=`<span style="color:#FFFF00">スロット${t[a]}</span>のステージデータを消去しますか？<br><span style = "color:#ff8282">一度消したデータは元に戻せません。</span>`,f(T[46],"消去する"),f(T[45],"やっぱりやめる")}let B2=o("performanceTxt","txt"),E2=(i(B2,r),y(B2,0,0),b(B2,h,h),m(B2,"#FFFFFF","smartFontUI","45","normal","right"),B2.style.zIndex=1e4,f(B2,""),'<span style ="color:#FFFF00">『パチタイツ』にてエディットステージを共有する場合は、必ず以下の点にご注意ください。</span><br><br>・共有されたステージに関して、開発者ラムネは一切の責任を負いません。<br>・ステージのデータはURLに変換されて含まれます。サーバに保存される仕組みなどはありません。<br>・不適切と判断されるようなステージの共有や、制作したステージの商用利用はご遠慮ください。<br>・「第三者による編集・共有」を「ダメ！」に設定すると、第三者がステージを受け取ってセーブしても、ゲーム内の機能で直接編集や共有はできません。ただし、他者にステージの内容が使用されないことを100%保証するものではありませんので、ご了承ください。');function A2(){Ne&&(p("image/mode0.webp"),p("image/mode1.webp"),p("image/mode2.webp"),p("image/mode3.webp"),p("image/pageChange0.webp"),p("image/pageChange1.webp")),f(jt,"その他"),i0(),e2()||(v[6].use=!1,k[6].style.opacity=.5);var t=["image/pageChange0.webp","image/pageChange1.webp",1,0,0,3,3,3],a=[20,80,50,50,50,50,50,50],o=[24,24,36,46,54,64,72,88];for(let e=0;e<8;e++)y(k[e],a[e]+"%",o[e]+"%"),D(k[e]).style.opacity=.7,isNaN(t[e])?u(k[e],w(t[e])):u(k[e],w(`image/mode${t[e]}.webp`));if(y(B2,"50%","24%"),0===F||1===F?(I.datacut^=1,G("start",5,"se/select"),Ue()):2===F?(M.m=1,M.mode="shareRule",M.button=[1],G("start",0,"se/confirm"),M.text=E2,f(T[45],"閉じる")):3===F?(v[0].use=!1,v[1].use=!1,v[2].use=!1,v[3].use=!1,v[4].use=!1,v[5].use=!1,v[6].use=!1,v[7].use=!1,v[43].use=!1,G("start",0,"se/confirm"),setTimeout(()=>{zt("https://ramunespark.github.io/"),v[0].use=!0,v[1].use=!0,v[2].use=!0,v[3].use=!0,v[4].use=!0,v[5].use=!0,v[6].use=!0,v[7].use=!0,v[43].use=!0},500)):4===F?(G("start",0,"se/confirm"),c="credit"):5===F?(M.m=1,M.mode="clear",M.button=[1,0],M.size=400,Fe=5*ue,G("start",0,"se/confirm"),f(T[45],"やだ！"),f(T[46],"消去する"),k[46].style.opacity=.3):6===F?(I2=-1,c="saveLoad",C="erase",G("start",0,"se/confirm")):7===F&&(M.m=1,M.mode="allClear",M.button=[1,0],M.size=400,Fe=7*ue,G("start",0,"se/confirm"),f(T[45],"やだ！"),f(T[46],"消去する"),k[46].style.opacity=.3),3===M.m&&(Fe<=0?(Fe=0,k[46].style.opacity=1,v[46].use=!0):(v[46].use=!1,Fe--)),"clear"===M.mode)if(M.text='ステージクリア状況のセーブデータを消去しますか？<br><br>パスワードがあれば復旧可能ですが、<span style = "color:#ff8282">★評価は消えてしまう場合があります。</span><br><br>※エディットステージは消去されません。<br>※<span style = "font-family:FGMediumHankaku">'+Math.ceil(Fe/ue)+"</span>秒後に削除可能になります。",46===F&&Fe<=0){G("start",0,"se/confirm"),c="title";for(let e=1;e<=50;e++)I.clear[e]=0;I.last={m:0,clock:0,flip:0,stage:0,look:0},Ue()}else 45===F&&(M.m=4,G("start",1,"se/back"));else"allClear"===M.mode?(M.text='セーブデータを消去しますか？<br><br><span style = "color:#ff8282">ステージクリア状況、エディットステージがすべてなくなります。</span><br><br>※<span style = "font-family:FGMediumHankaku">'+Math.ceil(Fe/ue)+"</span>秒後に削除可能になります。",46===F&&Fe<=0?(G("start",5,"se/reset"),c="title",localStorage.removeItem("P.TIGHTS_SAVEDATA"),I=null,qe()):45===F&&(M.m=4,G("start",1,"se/back"))):"shareRule"===M.mode&&45===F&&(M.m=4,G("start",0,"se/confirm"));f(B2,["画質優先","動作優先"][I.datacut]),f(T[2],"エディット共有の注意事項"),f(T[3],"ラムネのホームページ"),f(T[4],"クレジット"),f(T[5],"クリア状況の消去"),f(T[6],"エディットステージの消去"),f(T[7],"セーブデータの全消去"),Nt(()=>{c="title"})}let R2=o("creditBG","other"),O2=(i(R2,r),y(R2,"50%",0),b(R2,h,U),R2.style.zIndex=0,R2.style.width=he+"px",R2.style.height="100px",R2.style.mixBlendMode="normal",R2.del=()=>{},[]);for(let e=0;e<10;e++)O2[e]=o("cr1"+e,"txt"),i(O2[e],R2),y(O2[e],100,150*e),b(O2[e],q,U),m(O2[e],"#FFFF00","smartFontUI","25","normal","left"),O2[e].style.zIndex=0,f(O2[e],"");let C2=[];for(let e=0;e<10;e++)C2[e]=o("cr2"+e,"txt"),i(C2[e],R2),y(C2[e],he-100,150*e+40),b(C2[e],H,U),m(C2[e],"#FFFFFF","smartFontUI","25","normal","left"),C2[e].style.zIndex=0,f(C2[e],"");C2[8].style.width="500px",P(C2[8]).style.whiteSpace="normal";let L2=0;function G2(){-100===d&&(L2=be+50),-100===d&&G("start",31,"bgm/main"),0<d&&j2(31,.1),i0(),f(O2[0],"GAME DESIGN"),f(C2[0],"RAMUNE '01"),f(O2[1],"MAIN PROGRAM"),f(C2[1],"RAMUNE '01"),f(O2[2],"UI DESIGN"),f(C2[2],"RAMUNE '01"),f(O2[3],"GRAPHIC DESIGN"),f(C2[3],"RAMUNE '01"),f(O2[4],"MUSIC COMPOSER"),f(C2[4],"RAM LO FANTAXY (RAMUNE '01)"),f(O2[5],"SOUND FX"),f(C2[5],"RAM LO FANTAXY (RAMUNE '01)"),f(O2[6],"GAME PLANNER"),f(C2[6],"RAMUNE '01"),f(O2[7],"GAME DIRECTOR"),f(C2[7],"RAMUNE '01"),f(O2[8],"LICENSE"),f(C2[8],"crypto-js<br>[The MIT License (MIT)](http://opensource.org/licenses/MIT)<br><br>Copyright (c) 2009-2013 Jeff Mott<br>Copyright (c) 2013-2016 Evan Vosberg<br><br>"+`<span style = "font-size:18px">Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files(the "Software"), to deal
    in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and / or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
        all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</span>`),f(C2[9],"PRESENTED BY RAMUNE SPARK"),y(C2[9],"50%",2890),b(C2[9],h,h),(L2-=3)<=-(2890-be/2)&&(L2=-(2890-be/2),++Fe>=3*ue)&&(c="other"),y(R2,"50%",L2),Nt(()=>{c="other"})}c="title",k2ndTime=40,k3rdTime=8;let D2=o("bg","img"),P2=(i(D2,r),y(D2,"50%","50%"),b(D2,h,h),D2.style.zIndex=0,u(D2,""),o("test","img")),q2=(i(P2,r),y(P2,110,50),b(P2,h,h,0,1),P2.style.zIndex=1001,u(P2,""),o("testText","txt"));function U2(){"game"===xe?M0():"stageSelect"===xe?o0():"title"===xe?$0():"password"===xe?_0():"edit0"===xe?Z0():"edit1"===xe?f2():"saveLoad"===xe?T2():"other"===xe?A2():"credit"===xe&&G2()}i(q2,r),y(q2,"0%","0%"),b(q2,q,U),m(q2,"#FFFFFF","NotoSansJP-Medium","20","normal","left"),W(q2,3,"blue"),q2.style.zIndex=1e4,f(q2,"");let H2=window.innerWidth,$2=window.innerHeight;function K2(){Y(),H2=window.innerWidth,$2=window.innerHeight,we=H2/$2>=he/be?$2/be:H2/he,b(r,h,h,0,we)}function J2(){for(let e=0;e<V.length;e++)V[e].del?V[e].del():g(V[e])}K2(),r.style.width=he+"px",r.style.height=be+"px",window.addEventListener("resize",K2),window.addEventListener("wheel",e=>{e.preventDefault()},{passive:!1}),window.addEventListener("touchmove",e=>{1<e.touches.length&&e.preventDefault()},{passive:!1}),window.oncontextmenu=function(e){return e.stopPropagation(),!1};let W2=new AudioContext,V2=[],L=[],X2=[],Y2=[],_2=I.sound;for(let e=0;e<32;e++)L[e]=null;function G(e,t=-1,a=""){null!==W2&&J(ea[a])&&(2<=_2||1<=_2&&!a.startsWith("bgm/"))&&V2.push({src:a,p:e,ch:t})}function j2(e,t){L[e]&&"play"===L[e].state&&(L[e].fadeOut=t)}function Q2(){for(let e=0;e<32;e++){var t;L[e]&&"play"===L[e].state&&0<L[e].fadeOut&&(L[e].customVol-=L[e].fadeOut,t=L[e].pathName,L[e].customVol<=0&&(L[e].customVol=0,L[e].stop(),Y2[e]+=W2.currentTime-X2[e],L[e].state="pause"),L[e].gainNode.gain.value=ea[t].volume*L[e].customVol)}for(let a=0;a<V2.length;a++)if("start"===V2[a].p||"continue"===V2[a].p){let e,t=0;var o;"start"===V2[a].p?(e=V2[a].src,t=-1===V2[a].ch?ea[e].channel:V2[a].ch):(t=V2[a].ch,e=L[t].pathName),L[t]&&"pause"!==L[t].state&&"continue"===V2[a].p||(L[t]&&"play"===L[t].state&&L[t].stop(),(i=W2.createBufferSource()).buffer=ea[e].data,i.pathName=ea[e].path,i.loop=ea[e].loop,i.fadeOut=0,i.customVol=1,(o=W2.createGain()).gain.value=ea[e].volume*i.customVol,ea[e].loop?(i.loopStart=ea[e].loopStartTime,null!==ea[e].loopEndTime&&(i.loopEnd=ea[e].loopEndTime)):i.onended=()=>{L[t].state="end"},i.connect(o),o.connect(W2.destination),L[t]=i,L[t].gainNode=o,"start"===V2[a].p?(X2[t]=W2.currentTime,Y2[t]=0,L[t].start()):"continue"===V2[a].p&&(L[t].start(0,Y2[t]),X2[t]=W2.currentTime),L[t].state="play")}else if("pause"===V2[a].p){var i=V2[a].src;let e=0;e=-1===V2[a].ch?ea[i].channel:V2[a].ch,L[e]&&"play"===L[e].state&&(L[e].stop(),Y2[e]+=W2.currentTime-X2[e],L[e].state="pause")}1<=V2.length&&(V2=[])}let Z2={se:[{path:"se/confirm",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:0,data:null},{path:"se/back",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:1,data:null},{path:"se/passOK",volume:2.04,loop:!1,loopStartTime:0,loopEndTime:3,channel:2,data:null},{path:"se/passMiss",volume:2.04,loop:!1,loopStartTime:0,loopEndTime:3,channel:3,data:null},{path:"se/flip0",volume:2.125,loop:!1,loopStartTime:0,loopEndTime:3,channel:3,data:null},{path:"se/flip1",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:4,data:null},{path:"se/reset",volume:1.7*1.23,loop:!1,loopStartTime:0,loopEndTime:3,channel:5,data:null},{path:"bgm/clear0",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:30,data:null},{path:"bgm/clear1",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:30,data:null},{path:"se/select",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:5,data:null},{path:"se/paint",volume:1.7,loop:!0,loopStartTime:4/3/2,loopEndTime:2,channel:5,data:null},{path:"se/destroy",volume:1.7,loop:!0,loopStartTime:4/3/2,loopEndTime:2,channel:5,data:null},{path:"se/silent",volume:1.7,loop:!1,loopStartTime:0,loopEndTime:3,channel:28,data:null}],bgm:[{path:"bgm/main",volume:.765,loop:!0,loopStartTime:8,loopEndTime:84.8,channel:31,data:null},{path:"bgm/menu",volume:.816,loop:!0,loopStartTime:1.5,loopEndTime:13.5,channel:31,data:null},{path:"bgm/password",volume:.816,loop:!0,loopStartTime:2,loopEndTime:42,channel:31,data:null},{path:"bgm/edit",volume:.816,loop:!0,loopStartTime:2.4,loopEndTime:21.6,channel:31,data:null}]},ea={};async function ta(){var a=["se","bgm"];for(let t=0;t<a.length;t++)for(let e=0;e<Z2[a[t]].length;e++){var o=Math.floor(1e5*Math.random()),o=await(await fetch("sound/"+Z2[a[t]][e].path+".ogg?"+o)).arrayBuffer();Z2[a[t]][e].data=await W2.decodeAudioData(o),ea[Z2[a[t]][e].path]=Z2[a[t]][e]}}ta(),setTimeout(()=>{fe=setInterval(ye,1e3/ue)},30);